{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/es.reflect.construct.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport * as t from \"leaflet\";\nimport { Control as e, Icon as r, FeatureGroup as n, DomEvent as o, Marker as s, LatLngBounds as i, LatLng as a } from \"leaflet\";\n\nfunction u() {\n  return (u = Object.assign || function (t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n\n      for (var n in r) {\n        Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n      }\n    }\n\n    return t;\n  }).apply(this, arguments);\n}\n\nfunction l(t, e) {\n  t.prototype = Object.create(e.prototype), t.prototype.constructor = t, t.__proto__ = e;\n}\n\nfunction c(t, e) {\n  return (c = Object.setPrototypeOf || function (t, e) {\n    return t.__proto__ = e, t;\n  })(t, e);\n}\n\nfunction h() {\n  if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n  if (Reflect.construct.sham) return !1;\n  if (\"function\" == typeof Proxy) return !0;\n\n  try {\n    return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;\n  } catch (t) {\n    return !1;\n  }\n}\n\nfunction p(t, e, r) {\n  return (p = h() ? Reflect.construct : function (t, e, r) {\n    var n = [null];\n    n.push.apply(n, e);\n    var o = new (Function.bind.apply(t, n))();\n    return r && c(o, r.prototype), o;\n  }).apply(null, arguments);\n}\n\nfunction f(t, e, r, n) {\n  void 0 === e && (e = \"\"), void 0 === n && (n = {});\n  var o = document.createElement(t);\n  return e && (o.className = e), Object.keys(n).forEach(function (t) {\n    if (\"function\" == typeof n[t]) {\n      var e = 0 === t.indexOf(\"on\") ? t.substr(2).toLowerCase() : t;\n      o.addEventListener(e, n[t]);\n    } else \"html\" === t ? o.innerHTML = n[t] : \"text\" === t ? o.innerText = n[t] : o.setAttribute(t, n[t]);\n  }), r && r.appendChild(o), o;\n}\n\nfunction d(t) {\n  t.preventDefault(), t.stopPropagation();\n}\n\nvar m = function m() {\n  for (var t = arguments.length, e = new Array(t), r = 0; r < t; r++) {\n    e[r] = arguments[r];\n  }\n\n  return e.filter(Boolean).join(\" \").trim();\n};\n\nfunction v(t, e) {\n  t && t.classList && (Array.isArray(e) ? e : [e]).forEach(function (e) {\n    t.classList.contains(e) || t.classList.add(e);\n  });\n}\n\nfunction y(t, e) {\n  t && t.classList && (Array.isArray(e) ? e : [e]).forEach(function (e) {\n    t.classList.contains(e) && t.classList.remove(e);\n  });\n}\n\nvar g,\n    b = 13,\n    x = 40,\n    E = 38,\n    w = [b, 27, x, E, 37, 39],\n    L = function () {\n  function t(t) {\n    var e = this,\n        r = t.handleSubmit,\n        n = t.searchLabel,\n        o = t.classNames,\n        s = void 0 === o ? {} : o;\n    this.hasError = !1, this.container = f(\"div\", m(\"geosearch\", s.container)), this.form = f(\"form\", [\"\", s.form].join(\" \"), this.container, {\n      autocomplete: \"none\",\n      onClick: d,\n      onDblClick: d,\n      touchStart: d,\n      touchEnd: d\n    }), this.input = f(\"input\", [\"glass\", s.input].join(\" \"), this.form, {\n      type: \"text\",\n      placeholder: n || \"search\",\n      onInput: this.onInput,\n      onKeyUp: function onKeyUp(t) {\n        return e.onKeyUp(t);\n      },\n      onKeyPress: function onKeyPress(t) {\n        return e.onKeyPress(t);\n      },\n      onFocus: this.onFocus,\n      onBlur: this.onBlur,\n      onClick: function onClick() {\n        e.input.focus(), e.input.dispatchEvent(new Event(\"focus\"));\n      }\n    }), this.handleSubmit = r;\n  }\n\n  var e = t.prototype;\n  return e.onFocus = function () {\n    v(this.form, \"active\");\n  }, e.onBlur = function () {\n    y(this.form, \"active\");\n  }, e.onSubmit = function (t) {\n    try {\n      var e = this;\n      return d(t), y(r = e.container, \"error\"), v(r, \"pending\"), Promise.resolve(e.handleSubmit({\n        query: e.input.value\n      })).then(function () {\n        y(e.container, \"pending\");\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n\n    var r;\n  }, e.onInput = function () {\n    this.hasError && (y(this.container, \"error\"), this.hasError = !1);\n  }, e.onKeyUp = function (t) {\n    27 === t.keyCode && (y(this.container, [\"pending\", \"active\"]), this.input.value = \"\", document.body.focus(), document.body.blur());\n  }, e.onKeyPress = function (t) {\n    t.keyCode === b && this.onSubmit(t);\n  }, e.setQuery = function (t) {\n    this.input.value = t;\n  }, t;\n}(),\n    k = function () {\n  function t(t) {\n    var e = this,\n        r = t.handleClick,\n        n = t.classNames,\n        o = void 0 === n ? {} : n,\n        s = t.notFoundMessage;\n    this.selected = -1, this.results = [], this.onClick = function (t) {\n      if (\"function\" == typeof e.handleClick) {\n        var r = t.target;\n\n        if (r && e.container.contains(r) && r.hasAttribute(\"data-key\")) {\n          var n = Number(r.getAttribute(\"data-key\"));\n          e.clear(), e.handleClick({\n            result: e.results[n]\n          });\n        }\n      }\n    }, this.handleClick = r, this.notFoundMessage = s ? f(\"div\", m(o.notfound), void 0, {\n      html: s\n    }) : void 0, this.container = f(\"div\", m(\"results\", o.resultlist)), this.container.addEventListener(\"click\", this.onClick, !0), this.resultItem = f(\"div\", m(o.item));\n  }\n\n  var e = t.prototype;\n  return e.render = function (t, e) {\n    var r = this;\n    void 0 === t && (t = []), this.clear(), t.forEach(function (t, n) {\n      var o = r.resultItem.cloneNode(!0);\n      o.setAttribute(\"data-key\", \"\" + n), o.innerHTML = e({\n        result: t\n      }), r.container.appendChild(o);\n    }), t.length > 0 ? (v(this.container.parentElement, \"open\"), v(this.container, \"active\")) : this.notFoundMessage && (this.container.appendChild(this.notFoundMessage), v(this.container.parentElement, \"open\")), this.results = t;\n  }, e.select = function (t) {\n    return Array.from(this.container.children).forEach(function (e, r) {\n      return r === t ? v(e, \"active\") : y(e, \"active\");\n    }), this.selected = t, this.results[t];\n  }, e.count = function () {\n    return this.results ? this.results.length : 0;\n  }, e.clear = function () {\n    for (this.selected = -1; this.container.lastChild;) {\n      this.container.removeChild(this.container.lastChild);\n    }\n\n    y(this.container.parentElement, \"open\"), y(this.container, \"active\");\n  }, t;\n}(),\n    C = {\n  position: \"topleft\",\n  style: \"button\",\n  showMarker: !0,\n  showPopup: !1,\n  popupFormat: function popupFormat(t) {\n    return \"\" + t.result.label;\n  },\n  resultFormat: function resultFormat(t) {\n    return \"\" + t.result.label;\n  },\n  marker: {\n    icon: t && r ? new r.Default() : void 0,\n    draggable: !1\n  },\n  maxMarkers: 1,\n  maxSuggestions: 5,\n  retainZoomLevel: !1,\n  animateZoom: !0,\n  searchLabel: \"Enter address\",\n  notFoundMessage: \"\",\n  messageHideDelay: 3e3,\n  zoomLevel: 18,\n  classNames: {\n    container: \"leaflet-bar leaflet-control leaflet-control-geosearch\",\n    button: \"leaflet-bar-part leaflet-bar-part-single\",\n    resetButton: \"reset\",\n    msgbox: \"leaflet-bar message\",\n    form: \"\",\n    input: \"\",\n    resultlist: \"\",\n    item: \"\",\n    notfound: \"leaflet-bar-notfound\"\n  },\n  autoComplete: !0,\n  autoCompleteDelay: 250,\n  autoClose: !1,\n  keepResult: !1,\n  updateMap: !0\n},\n    U = \"Leaflet must be loaded before instantiating the GeoSearch control\",\n    P = {\n  options: u({}, C),\n  classNames: u({}, C.classNames),\n  initialize: function initialize(e) {\n    var r,\n        s,\n        i,\n        a,\n        l = this;\n    if (!t) throw new Error(U);\n    if (!e.provider) throw new Error(\"Provider is missing from options\");\n    this.options = u({}, this.options, {}, e), this.classNames = u({}, this.classNames, {}, e.classNames), this.markers = new n(), this.classNames.container += \" leaflet-geosearch-\" + this.options.style, this.searchElement = new L({\n      searchLabel: this.options.searchLabel,\n      classNames: {\n        container: this.classNames.container,\n        form: this.classNames.form,\n        input: this.classNames.input\n      },\n      handleSubmit: function handleSubmit(t) {\n        return l.onSubmit(t);\n      }\n    }), this.button = f(\"a\", this.classNames.button, this.searchElement.container, {\n      title: this.options.searchLabel,\n      href: \"#\",\n      onClick: function onClick(t) {\n        return l.onClick(t);\n      }\n    }), o.disableClickPropagation(this.button), this.resetButton = f(\"a\", this.classNames.resetButton, this.searchElement.form, {\n      text: \"Ã—\",\n      href: \"#\",\n      onClick: function onClick() {\n        return l.clearResults(null, !0);\n      }\n    }), o.disableClickPropagation(this.resetButton), this.options.autoComplete && (this.resultList = new k({\n      handleClick: function handleClick(t) {\n        var e = t.result;\n        l.searchElement.input.value = e.label, l.onSubmit({\n          query: e.label,\n          data: e\n        });\n      },\n      classNames: {\n        resultlist: this.classNames.resultlist,\n        item: this.classNames.item,\n        notfound: this.classNames.notfound\n      },\n      notFoundMessage: this.options.notFoundMessage\n    }), this.searchElement.form.appendChild(this.resultList.container), this.searchElement.input.addEventListener(\"keyup\", (r = function r(t) {\n      return l.autoSearch(t);\n    }, void 0 === (s = this.options.autoCompleteDelay) && (s = 250), void 0 === i && (i = !1), function () {\n      for (var t = arguments.length, e = new Array(t), n = 0; n < t; n++) {\n        e[n] = arguments[n];\n      }\n\n      a && clearTimeout(a), a = setTimeout(function () {\n        a = null, i || r.apply(void 0, e);\n      }, s), i && !a && r.apply(void 0, e);\n    }), !0), this.searchElement.input.addEventListener(\"keydown\", function (t) {\n      return l.selectResult(t);\n    }, !0), this.searchElement.input.addEventListener(\"keydown\", function (t) {\n      return l.clearResults(t, !0);\n    }, !0)), this.searchElement.form.addEventListener(\"click\", function (t) {\n      t.preventDefault();\n    }, !1);\n  },\n  onAdd: function onAdd(t) {\n    var e = this.options,\n        r = e.showMarker,\n        n = e.style;\n\n    if (this.map = t, r && this.markers.addTo(t), \"bar\" === n) {\n      var s = t.getContainer().querySelector(\".leaflet-control-container\");\n      this.container = f(\"div\", \"leaflet-control-geosearch leaflet-geosearch-bar\"), this.container.appendChild(this.searchElement.form), s.appendChild(this.container);\n    }\n\n    return o.disableClickPropagation(this.searchElement.form), this.searchElement.container;\n  },\n  onRemove: function onRemove() {\n    var t;\n    return null == (t = this.container) || t.remove(), this;\n  },\n  onClick: function onClick(t) {\n    t.preventDefault(), t.stopPropagation();\n    var e = this.searchElement,\n        r = e.container,\n        n = e.input;\n    r.classList.contains(\"active\") ? (y(r, \"active\"), this.clearResults()) : (v(r, \"active\"), n.focus());\n  },\n  selectResult: function selectResult(t) {\n    if (-1 !== [b, x, E].indexOf(t.keyCode)) if (t.preventDefault(), t.keyCode !== b) {\n      var e = this.resultList.count() - 1;\n\n      if (!(e < 0)) {\n        var r = this.resultList.selected,\n            n = t.keyCode === x ? r + 1 : r - 1,\n            o = this.resultList.select(n < 0 ? e : n > e ? 0 : n);\n        this.searchElement.input.value = o.label;\n      }\n    } else {\n      var s = this.resultList.select(this.resultList.selected);\n      this.onSubmit({\n        query: this.searchElement.input.value,\n        data: s\n      });\n    }\n  },\n  clearResults: function clearResults(t, e) {\n    if (void 0 === e && (e = !1), !t || 27 === t.keyCode) {\n      var r = this.options,\n          n = r.autoComplete;\n      !e && r.keepResult || (this.searchElement.input.value = \"\", this.markers.clearLayers()), n && this.resultList.clear();\n    }\n  },\n  autoSearch: function autoSearch(t) {\n    try {\n      var e = this;\n      if (w.indexOf(t.keyCode) > -1) return Promise.resolve();\n\n      var r = t.target.value,\n          n = e.options.provider,\n          o = function () {\n        if (r.length) return Promise.resolve(n.search({\n          query: r\n        })).then(function (t) {\n          t = t.slice(0, e.options.maxSuggestions), e.resultList.render(t, e.options.resultFormat);\n        });\n        e.resultList.clear();\n      }();\n\n      return Promise.resolve(o && o.then ? o.then(function () {}) : void 0);\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  },\n  onSubmit: function onSubmit(t) {\n    try {\n      var e = this;\n      return Promise.resolve(e.options.provider.search(t)).then(function (r) {\n        r && r.length > 0 && e.showResult(r[0], t);\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  },\n  showResult: function showResult(t, e) {\n    var r = this.options,\n        n = r.autoClose,\n        o = r.updateMap,\n        s = this.markers.getLayers();\n    s.length >= this.options.maxMarkers && this.markers.removeLayer(s[0]);\n    var i = this.addMarker(t, e);\n    o && this.centerMap(t), this.map.fireEvent(\"geosearch/showlocation\", {\n      location: t,\n      marker: i\n    }), n && this.closeResults();\n  },\n  closeResults: function closeResults() {\n    var t = this.searchElement.container;\n    t.classList.contains(\"active\") && y(t, \"active\"), this.clearResults();\n  },\n  addMarker: function addMarker(t, e) {\n    var r = this,\n        n = this.options,\n        o = n.marker,\n        i = n.showPopup,\n        a = n.popupFormat,\n        u = new s([t.y, t.x], o),\n        l = t.label;\n    return \"function\" == typeof a && (l = a({\n      query: e,\n      result: t\n    })), u.bindPopup(l), this.markers.addLayer(u), i && u.openPopup(), o.draggable && u.on(\"dragend\", function (t) {\n      r.map.fireEvent(\"geosearch/marker/dragend\", {\n        location: u.getLatLng(),\n        event: t\n      });\n    }), u;\n  },\n  centerMap: function centerMap(t) {\n    var e = this.options,\n        r = e.retainZoomLevel,\n        n = e.animateZoom,\n        o = t.bounds ? new i(t.bounds) : new a(t.y, t.x).toBounds(10),\n        s = o.isValid() ? o : this.markers.getBounds();\n    !r && o.isValid() && !t.bounds || r || !o.isValid() ? this.map.setView(s.getCenter(), this.getZoom(), {\n      animate: n\n    }) : this.map.fitBounds(s, {\n      animate: n\n    });\n  },\n  getZoom: function getZoom() {\n    var t = this.options,\n        e = t.zoomLevel;\n    return t.retainZoomLevel ? this.map.getZoom() : e;\n  }\n};\n\nfunction R() {\n  if (!t) throw new Error(U);\n\n  for (var r = e.extend(P), n = arguments.length, o = new Array(n), s = 0; s < n; s++) {\n    o[s] = arguments[s];\n  }\n\n  return p(r, o);\n}\n\n!function (t) {\n  t[t.SEARCH = 0] = \"SEARCH\", t[t.REVERSE = 1] = \"REVERSE\";\n}(g || (g = {}));\n\nvar S = function () {\n  function t(t) {\n    void 0 === t && (t = {}), this.options = t;\n  }\n\n  var e = t.prototype;\n  return e.getParamString = function (t) {\n    void 0 === t && (t = {});\n    var e = u({}, this.options.params, {}, t);\n    return Object.keys(e).map(function (t) {\n      return encodeURIComponent(t) + \"=\" + encodeURIComponent(e[t]);\n    }).join(\"&\");\n  }, e.getUrl = function (t, e) {\n    return t + \"?\" + this.getParamString(e);\n  }, e.search = function (t) {\n    try {\n      var e = this,\n          r = e.endpoint({\n        query: t.query,\n        type: g.SEARCH\n      });\n      return Promise.resolve(fetch(r)).then(function (t) {\n        return Promise.resolve(t.json()).then(function (t) {\n          return e.parse({\n            data: t\n          });\n        });\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, t;\n}(),\n    j = function (t) {\n  function e() {\n    return t.apply(this, arguments) || this;\n  }\n\n  l(e, t);\n  var r = e.prototype;\n  return r.endpoint = function () {\n    return \"https://places-dsn.algolia.net/1/places/query\";\n  }, r.findBestMatchLevelIndex = function (t) {\n    var e = t.find(function (t) {\n      return \"full\" === t.matchLevel;\n    }) || t.find(function (t) {\n      return \"partial\" === t.matchLevel;\n    });\n    return e ? t.indexOf(e) : 0;\n  }, r.getLabel = function (t) {\n    var e, r, n, o;\n    return [null == (e = t.locale_names) ? void 0 : e.default[this.findBestMatchLevelIndex(t._highlightResult.locale_names.default)], null == (r = t.city) ? void 0 : r.default[this.findBestMatchLevelIndex(t._highlightResult.city.default)], t.administrative[this.findBestMatchLevelIndex(t._highlightResult.administrative)], null == (n = t.postcode) ? void 0 : n[this.findBestMatchLevelIndex(t._highlightResult.postcode)], null == (o = t.country) ? void 0 : o.default].filter(Boolean).join(\", \");\n  }, r.parse = function (t) {\n    var e = this;\n    return t.data.hits.map(function (t) {\n      return {\n        x: t._geoloc.lng,\n        y: t._geoloc.lat,\n        label: e.getLabel(t),\n        bounds: null,\n        raw: t\n      };\n    });\n  }, r.search = function (t) {\n    var e = t.query;\n\n    try {\n      var r = this,\n          n = \"string\" == typeof e ? {\n        query: e\n      } : e;\n      return Promise.resolve(fetch(r.endpoint(), {\n        method: \"POST\",\n        body: JSON.stringify(u({}, r.options.params, {}, n))\n      })).then(function (t) {\n        return Promise.resolve(t.json()).then(function (t) {\n          return r.parse({\n            data: t\n          });\n        });\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, e;\n}(S),\n    q = function (t) {\n  function e() {\n    var e;\n    return (e = t.apply(this, arguments) || this).searchUrl = \"https://dev.virtualearth.net/REST/v1/Locations\", e;\n  }\n\n  l(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query,\n        r = \"string\" == typeof e ? {\n      q: e\n    } : e;\n    return r.jsonp = t.jsonp, this.getUrl(this.searchUrl, r);\n  }, r.parse = function (t) {\n    return 0 === t.data.resourceSets.length ? [] : t.data.resourceSets[0].resources.map(function (t) {\n      return {\n        x: t.point.coordinates[1],\n        y: t.point.coordinates[0],\n        label: t.address.formattedAddress,\n        bounds: [[t.bbox[0], t.bbox[1]], [t.bbox[2], t.bbox[3]]],\n        raw: t\n      };\n    });\n  }, r.search = function (t) {\n    var e,\n        r,\n        n,\n        o = t.query;\n\n    try {\n      var s = this,\n          i = \"BING_JSONP_CB_\" + Date.now();\n      return Promise.resolve((e = s.endpoint({\n        query: o,\n        jsonp: i\n      }), r = i, n = f(\"script\", null, document.body), n.setAttribute(\"type\", \"text/javascript\"), new Promise(function (t) {\n        window[r] = function (e) {\n          n.remove(), delete window[r], t(e);\n        }, n.setAttribute(\"src\", e);\n      }))).then(function (t) {\n        return s.parse({\n          data: t\n        });\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, e;\n}(S),\n    N = function (t) {\n  function e() {\n    var e;\n    return (e = t.apply(this, arguments) || this).searchUrl = \"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find\", e;\n  }\n\n  l(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query,\n        r = \"string\" == typeof e ? {\n      text: e\n    } : e;\n    return r.f = \"json\", this.getUrl(this.searchUrl, r);\n  }, r.parse = function (t) {\n    return t.data.locations.map(function (t) {\n      return {\n        x: t.feature.geometry.x,\n        y: t.feature.geometry.y,\n        label: t.name,\n        bounds: [[t.extent.ymin, t.extent.xmin], [t.extent.ymax, t.extent.xmax]],\n        raw: t\n      };\n    });\n  }, e;\n}(S),\n    A = function (t) {\n  function e(e) {\n    var r;\n    return void 0 === e && (e = {}), (r = t.call(this, e) || this).host = e.host || \"http://localhost:4000\", r;\n  }\n\n  l(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query;\n\n    switch (t.type) {\n      case g.REVERSE:\n        return this.getUrl(this.host + \"/v1/reverse\", \"string\" == typeof e ? {} : e);\n\n      default:\n        return this.getUrl(this.host + \"/v1/autocomplete\", \"string\" == typeof e ? {\n          text: e\n        } : e);\n    }\n  }, r.parse = function (t) {\n    return t.data.features.map(function (t) {\n      var e = {\n        x: t.geometry.coordinates[0],\n        y: t.geometry.coordinates[1],\n        label: t.properties.label,\n        bounds: null,\n        raw: t\n      };\n      return Array.isArray(t.bbox) && 4 === t.bbox.length && (e.bounds = [[t.bbox[1], t.bbox[0]], [t.bbox[3], t.bbox[2]]]), e;\n    });\n  }, e;\n}(S),\n    M = function (t) {\n  function e(e) {\n    return void 0 === e && (e = {}), e.host = \"https://api.geocode.earth\", t.call(this, e) || this;\n  }\n\n  return l(e, t), e;\n}(A),\n    F = function (t) {\n  function e() {\n    var e;\n    return (e = t.apply(this, arguments) || this).searchUrl = \"https://maps.googleapis.com/maps/api/geocode/json\", e;\n  }\n\n  l(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query;\n    return this.getUrl(this.searchUrl, \"string\" == typeof e ? {\n      address: e\n    } : e);\n  }, r.parse = function (t) {\n    return t.data.results.map(function (t) {\n      return {\n        x: t.geometry.location.lng,\n        y: t.geometry.location.lat,\n        label: t.formatted_address,\n        bounds: [[t.geometry.viewport.southwest.lat, t.geometry.viewport.southwest.lng], [t.geometry.viewport.northeast.lat, t.geometry.viewport.northeast.lng]],\n        raw: t\n      };\n    });\n  }, e;\n}(S),\n    _ = function (t) {\n  function e() {\n    var e;\n    return (e = t.apply(this, arguments) || this).searchUrl = \"https://geocode.search.hereapi.com/v1/geocode\", e;\n  }\n\n  l(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query;\n    return this.getUrl(this.searchUrl, \"string\" == typeof e ? {\n      q: e\n    } : e);\n  }, r.parse = function (t) {\n    return t.data.items.map(function (t) {\n      return {\n        x: t.position.lng,\n        y: t.position.lat,\n        label: t.address.label,\n        bounds: null,\n        raw: t\n      };\n    });\n  }, e;\n}(S),\n    B = function (t) {\n  function e(e) {\n    var r;\n    void 0 === e && (e = {});\n    var n = \"https://nominatim.openstreetmap.org\";\n    return (r = t.call(this, e) || this).searchUrl = e.searchUrl || n + \"/search\", r.reverseUrl = e.reverseUrl || n + \"/reverse\", r;\n  }\n\n  l(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query,\n        r = t.type,\n        n = \"string\" == typeof e ? {\n      q: e\n    } : e;\n\n    switch (n.format = \"json\", r) {\n      case g.REVERSE:\n        return this.getUrl(this.reverseUrl, n);\n\n      default:\n        return this.getUrl(this.searchUrl, n);\n    }\n  }, r.parse = function (t) {\n    return (Array.isArray(t.data) ? t.data : [t.data]).map(function (t) {\n      return {\n        x: Number(t.lon),\n        y: Number(t.lat),\n        label: t.display_name,\n        bounds: [[parseFloat(t.boundingbox[0]), parseFloat(t.boundingbox[2])], [parseFloat(t.boundingbox[1]), parseFloat(t.boundingbox[3])]],\n        raw: t\n      };\n    });\n  }, e;\n}(S),\n    O = function (t) {\n  function e(e) {\n    return t.call(this, u({}, e, {\n      searchUrl: \"https://locationiq.org/v1/search.php\",\n      reverseUrl: \"https://locationiq.org/v1/reverse.php\"\n    })) || this;\n  }\n\n  return l(e, t), e;\n}(B),\n    I = function (t) {\n  function e() {\n    var e;\n    return (e = t.apply(this, arguments) || this).searchUrl = \"https://api.opencagedata.com/geocode/v1/json\", e;\n  }\n\n  l(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query,\n        r = \"string\" == typeof e ? {\n      q: e\n    } : e;\n    return r.format = \"json\", this.getUrl(this.searchUrl, r);\n  }, r.parse = function (t) {\n    return t.data.results.map(function (t) {\n      return {\n        x: t.geometry.lng,\n        y: t.geometry.lat,\n        label: t.formatted,\n        bounds: [[t.bounds.southwest.lat, t.bounds.southwest.lng], [t.bounds.northeast.lat, t.bounds.northeast.lng]],\n        raw: t\n      };\n    });\n  }, r.search = function (e) {\n    try {\n      return Promise.resolve(e.query.length < 2 ? [] : t.prototype.search.call(this, e));\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, e;\n}(S),\n    D = function (t) {\n  function e(e) {\n    var r;\n    return void 0 === e && (e = {}), (r = t.call(this, e) || this).searchUrl = e.searchUrl || \"https://a.tiles.mapbox.com/v4/geocode/mapbox.places/\", r;\n  }\n\n  l(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    return this.getUrl(\"\" + this.searchUrl + t.query + \".json\");\n  }, r.parse = function (t) {\n    return (Array.isArray(t.data.features) ? t.data.features : []).map(function (t) {\n      var e = null;\n      return t.bbox && (e = [[parseFloat(t.bbox[1]), parseFloat(t.bbox[0])], [parseFloat(t.bbox[3]), parseFloat(t.bbox[2])]]), {\n        x: Number(t.center[0]),\n        y: Number(t.center[1]),\n        label: t.place_name ? t.place_name : t.text,\n        bounds: e,\n        raw: t\n      };\n    });\n  }, e;\n}(S),\n    V = function (t) {\n  function e(e) {\n    var r;\n    void 0 === e && (e = {});\n    var n = \"https://api-adresse.data.gouv.fr\";\n    return (r = t.call(this, e) || this).searchUrl = e.searchUrl || n + \"/search\", r.reverseUrl = e.reverseUrl || n + \"/reverse\", r;\n  }\n\n  l(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query,\n        r = \"string\" == typeof e ? {\n      q: e\n    } : e;\n\n    switch (t.type) {\n      case g.REVERSE:\n        return this.getUrl(this.reverseUrl, r);\n\n      default:\n        return this.getUrl(this.searchUrl, r);\n    }\n  }, r.parse = function (t) {\n    return t.data.features.map(function (t) {\n      return {\n        x: t.geometry.coordinates[0],\n        y: t.geometry.coordinates[1],\n        label: t.properties.label,\n        bounds: null,\n        raw: t\n      };\n    });\n  }, e;\n}(S);\n\nexport { j as AlgoliaProvider, q as BingProvider, N as EsriProvider, V as GeoApiFrProvider, R as GeoSearchControl, M as GeocodeEarthProvider, F as GoogleProvider, _ as HereProvider, S as JsonProvider, O as LocationIQProvider, D as MapBoxProvider, I as OpenCageProvider, B as OpenStreetMapProvider, A as PeliasProvider, R as SearchControl, L as SearchElement };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;SAAgBA,EACdC,GACAC,GACAC,GACAC;AAAAA,aAFAF,CAEAE,KAFAF,IAA2B,EAE3BE,GAF2B,WAE3BA,CAF2B,KAE3BA,IAAiE,EAFtC,CAE3BA;AAEA,MAAMC,IAAKC,SAASN,aAATM,CAAuBL,CAAvBK,CAAX;AA0BA,SAxBIJ,MACFG,EAAGH,SAAHG,GAAeH,CADbA,GAIJK,OAAOC,IAAPD,CAAYH,CAAZG,EAAwBE,OAAxBF,CAAgC,UAACG,CAAD,EAACA;AAC/B,QAA+B,qBAApBN,EAAWM,CAAXN,CAAX,EAA2C;AAEzC,UAAMO,IAA8B,MAAtBD,EAAIE,OAAJF,CAAY,IAAZA,CAAsB,GAChCA,EAAIG,MAAJH,CAAW,CAAXA,EAAcI,WAAdJ,EADgC,GAEhCA,CAFJ;AAGAL,QAAGU,gBAAHV,CAAoBM,CAApBN,EAA0BD,EAAWM,CAAXN,CAA1BC;AAAqCK,KALvC,MAMmB,WAARA,CAAQ,GACjBL,EAAGW,SAAHX,GAAeD,EAAWM,CAAXN,CADE,GAEA,WAARM,CAAQ,GACjBL,EAAGY,SAAHZ,GAAeD,EAAWM,CAAXN,CADE,GAGjBC,EAAGa,YAAHb,CAAgBK,CAAhBL,EAAqBD,EAAWM,CAAXN,CAArBC,CALiB;AAKeK,GAZpCH,CAJIL,EAoBAC,KACFA,EAAOgB,WAAPhB,CAAmBE,CAAnBF,CArBED,EAwBGG,CAAP;AAAOA;;AAAAA,SAGOe,CAHPf,CAGuBgB,CAHvBhB,EAGuBgB;AAC9BA,IAAMC,cAAND,IACAA,EAAMD,eAANC,EADAA;AACMD;;AAAAA,IAqBKG,IAAK,SAALA,CAAK;AAAA,iCAAIC,gBAAJ,EAAIA,KAAJ,EAAIA,KAAJ,EAAIA,GAAJ;AAAIA;AAAJ;;AAAIA,SACpBA,EAAWC,MAAXD,CAAkBE,OAAlBF,EAA2BG,IAA3BH,CAAgC,GAAhCA,EAAqCI,IAArCJ,EADoBA;AACiBI,CAtB/BR;;AAsB+BQ,SAEvBC,CAFuBD,CAGrC3B,CAHqC2B,EAIrC1B,CAJqC0B,EAIrC1B;AAEKD,OAAYA,EAAQ6B,SAApB7B,IAAoB6B,CAKNC,MAAMC,OAAND,CAAc7B,CAAd6B,IAA2B7B,CAA3B6B,GAAuC,CAAC7B,CAAD,CALjC4B,EAMdrB,OANcqB,CAMN,UAACG,CAAD,EAACA;AACbhC,MAAQ6B,SAAR7B,CAAkBiC,QAAlBjC,CAA2BgC,CAA3BhC,KACHA,EAAQ6B,SAAR7B,CAAkBkC,GAAlBlC,CAAsBgC,CAAtBhC,CADGA;AACmBgC,GARDH,CAApB7B;AAQqBgC;;AAAAA,SAKZG,CALYH,CAM1BhC,CAN0BgC,EAO1B/B,CAP0B+B,EAO1B/B;AAEKD,OAAYA,EAAQ6B,SAApB7B,IAAoB6B,CAKNC,MAAMC,OAAND,CAAc7B,CAAd6B,IAA2B7B,CAA3B6B,GAAuC,CAAC7B,CAAD,CALjC4B,EAMdrB,OANcqB,CAMN,UAACG,CAAD,EAACA;AACdhC,MAAQ6B,SAAR7B,CAAkBiC,QAAlBjC,CAA2BgC,CAA3BhC,KACFA,EAAQ6B,SAAR7B,CAAkBoC,MAAlBpC,CAAyBgC,CAAzBhC,CADEA;AACuBgC,GARJH,CAApB7B;AAQwBgC;;AAAAA,IClEnBK,CDkEmBL;AAAAA,IE1FlBM,IAAY,EF0FMN;AAAAA,IExFlBO,IAAiB,EFwFCP;AAAAA,IEvFlBQ,IAAe,EFuFGR;AAAAA,IEnFlBS,IAAe,CAC1BH,CAD0B,EANF,EAME,EAG1BC,CAH0B,EAI1BC,CAJ0B,EAHE,EAGF,EAFG,EAEH,CFmFGR;AAAAA,IGrEVU;AAOnB;AAAA;AAAA,QACEC,kBADF;AAAA,QAEEC,iBAFF;AAAA,QAEEA,MACArB,UAHF;AAAA,QAGEA,mBAAa,EAAbA,GAAasB,CAHf;AAFAC,qBAAW,CAAXA,EAOEA,KAAKC,SAALD,GAAiB/C,EACf,KADeA,EAEfuB,EAAG,WAAHA,EAAgBC,EAAWwB,SAA3BzB,CAFevB,CAPnB+C,EAYEA,KAAKE,IAALF,GAAY/C,EACV,MADUA,EAEV,CAAC,EAAD,EAAKwB,EAAWyB,IAAhB,EAAsBtB,IAAtB,CAA2B,GAA3B,CAFU3B,EAGV+C,KAAKC,SAHKhD,EAIV;AACEkD,oBAAc,MADhB;AAEEC,eAAS/B,CAFX;AAGEgC,kBAAYhC,CAHd;AAIEiC,kBAAYjC,CAJd;AAKEkC,gBAAUlC;AALZ,KAJUpB,CAZd+C,EAyBEA,KAAKQ,KAALR,GAAa/C,EACX,OADWA,EAEX,CAAC,OAAD,EAAUwB,EAAW+B,KAArB,EAA4B5B,IAA5B,CAAiC,GAAjC,CAFW3B,EAGX+C,KAAKE,IAHMjD,EAIX;AACEW,YAAM,MADR;AAEE6C,mBAAaX,KAAe,QAF9B;AAGEY,eAASV,KAAKU,OAHhB;AAIEC,eAAS,iBAACC,CAAD,EAACA;AAAAA,eAAMC,EAAKF,OAALE,CAAaD,CAAbC,CAAND;AAAmBA,OAJ/B;AAKEE,kBAAY,oBAACF,CAAD,EAACA;AAAAA,eAAMC,EAAKC,UAALD,CAAgBD,CAAhBC,CAAND;AAAsBA,OALrC;AAMEG,eAASf,KAAKe,OANhB;AAOEC,cAAQhB,KAAKgB,MAPf;AAaEZ,eAAS;AACPS,UAAKL,KAALK,CAAWI,KAAXJ,IACAA,EAAKL,KAALK,CAAWK,aAAXL,CAAyB,IAAIM,KAAJ,CAAU,OAAV,CAAzBN,CADAA;AACmC;AAfvC,KAJW5D,CAzBf+C,EAiDEA,KAAKH,YAALG,GAAoBH,CAjDtBG;AAiDsBH;;AAAAA;AAAAA,WAGtBkB,OAHsBlB,GAGtB;AACEf,MAAakB,KAAKE,IAAlBpB,EAAwB,QAAxBA;AAAwB,GAJJe,EAIIe,EAG1BI,MAH0B,GAG1B;AACE3B,MAAgBW,KAAKE,IAArBb,EAA2B,QAA3BA;AAA2B,GARPQ,EAQOe,EAGvBQ,QAHuB,GAGvBA,UAAS9C,CAAT8C,EAAS9C;AAAAA;AAAAA,cAEI0B,IAFJ1B;AAEI0B,aADjB3B,EAAgBC,CAAhBD,GHaFgB,EAJAnC,IGRmBmE,EAAKpB,SHYxBZ,EGZmC,OHYnCA,CGbEhB,EHcFS,EAAa5B,CAAb4B,EGb4C,SHa5CA,CGdET,EAC0CiD,gBAEpCD,EAAKxB,YAALwB,CAAkB;AAAEE,eAAOF,EAAKb,KAALa,CAAWG;AAApB,OAAlBH,CAFoC,EAEEG,IAFF,CAEEA;AAC5CnC,UAAgBgC,EAAKpB,SAArBZ,EAAgC,SAAhCA;AAAgC,OAHU,CAAzBW;AAGe,KALnB1B,CAKmB;AAAA;AAAA;;AAAA,QHKlCpB,CGLkC;AHKlCA,GGrBsB2C,EHqBtB3C,EGFAwD,OHEAxD,GGFA;AACO8C,SAAKyB,QAALzB,KAILX,EAAgBW,KAAKC,SAArBZ,EAAgC,OAAhCA,GACAW,KAAKyB,QAALzB,GAAKyB,CAAW,CALXzB;AAKW,GAzBIH,EAyBJe,EAGlBD,OAHkB,GAGlB,UAAQrC,CAAR,EAAQA;ADtGgB,WCuGlBA,EAAMoD,ODvGY,KC2GtBrC,EAAgBW,KAAKC,SAArBZ,EAAgC,CAAC,SAAD,EAAY,QAAZ,CAAhCA,GAEAW,KAAKQ,KAALR,CAAWwB,KAAXxB,GAAmB,EAFnBX,EAIA9B,SAASoE,IAATpE,CAAc0D,KAAd1D,EAJA8B,EAKA9B,SAASoE,IAATpE,CAAcqE,IAAdrE,EDhHsB;ACgHRqE,GAtCM/B,EAsCN+B,EAGhBd,UAHgBc,GAGhB,UAAWtD,CAAX,EAAWA;AACLA,MAAMoD,OAANpD,KAAkBkB,CAAlBlB,IAIJ0B,KAAKoB,QAALpB,CAAc1B,CAAd0B,CAJI1B;AAIUA,GA9CMuB,EA8CNvB,EAGhBuD,QAHgBvD,GAGhB,UAASiD,CAAT,EAASA;AACPvB,SAAKQ,KAALR,CAAWwB,KAAXxB,GAAmBuB,CAAnBvB;AAAmBuB,GAlDC1B,EAkDD0B,CAlDC1B;AAkDD0B,CAxGF3B,EHqEUV;AAAAA,II7EV4C;AASnB;AAAA;AAAA,QACEC,iBADF;AAAA,QACEA,MACAtD,UAFF;AAAA,QAEEA,mBAAa,EAAbA,GAAauD,CAFf;AAAA,QAGEC,qBAHF;AAPAjC,qBAAY,CAAZA,EACAA,eAA0B,EAD1BA,EA+EAA,eAAU,UAAC1B,CAAD,EAACA;AACT,UAAgC,qBAArBuC,EAAKkB,WAAhB;AAIA,YAAMG,IAAS5D,EAAM4D,MAArB;;AACA,YACGA,KACArB,EAAKZ,SAALY,CAAe1B,QAAf0B,CAAwBqB,CAAxBrB,CADAqB,IAEAA,EAAOC,YAAPD,CAAoB,UAApBA,CAHH;AAQA,cAAME,IAAMC,OAAOH,EAAOI,YAAPJ,CAAoB,UAApBA,CAAPG,CAAZ;AACAxB,YAAK0B,KAAL1B,IACAA,EAAKkB,WAALlB,CAAiB;AAAE2B,oBAAQ3B,EAAK4B,OAAL5B,CAAauB,CAAbvB;AAAV,WAAjBA,CADAA;AACwCuB;AAAAA;AAAAA,KA/F1CpC,EAYEA,KAAK+B,WAAL/B,GAAmB+B,CAZrB/B,EAaEA,KAAKiC,eAALjC,GAAyBiC,IACrBhF,EACE,KADFA,EAEEuB,EAAGC,EAAWiE,QAAdlE,CAFFvB,EAEgByF,KACdC,CAHF1F,EAIE;AAAE2F,YAAMX;AAAR,KAJFhF,CADqBgF,GAKXA,KAEVU,CApBN3C,EAsBEA,KAAKC,SAALD,GAAiB/C,EACf,KADeA,EAEfuB,EAAG,SAAHA,EAAcC,EAAWoE,UAAzBrE,CAFevB,CAtBnB+C,EA0BEA,KAAKC,SAALD,CAAehC,gBAAfgC,CAAgC,OAAhCA,EAAyCA,KAAKI,OAA9CJ,EAA8CI,CAAS,CAAvDJ,CA1BFA,EA4BEA,KAAK8C,UAAL9C,GAAkB/C,EAA8B,KAA9BA,EAAqCuB,EAAGC,EAAWsE,IAAdvE,CAArCvB,CA5BpB+C;AA4BuE+C;;AAAAA;AAAAA,WAGvEC,MAHuED,GAGvE,UAAON,CAAP,EAAqCQ,CAArC,EAAqCA;AAAAA;AAAAA,eAA9BR,CAA8BQ,KAA9BR,IAA0B,EAAIQ,GACnCjD,KAAKuC,KAALvC,EADmCiD,EAGnCR,EAAQ/E,OAAR+E,CAAgB,UAACD,CAAD,EAASJ,CAAT,EAASA;AACvB,UAAMc,IAAQC,EAAKL,UAALK,CAAgBC,SAAhBD,CAAgBC,CAAU,CAA1BD,CAAd;AACAD,QAAM/E,YAAN+E,CAAmB,UAAnBA,EAAmB,KAAed,CAAlCc,GACAA,EAAMjF,SAANiF,GAAkBD,EAAa;AAAET;AAAF,OAAbS,CADlBC,EAEAC,EAAKlD,SAALkD,CAAe/E,WAAf+E,CAA2BD,CAA3BC,CAFAD;AAE2BA,KAJ7BT,CAHmCQ,EAU/BR,EAAQY,MAARZ,GAAiB,CAAjBA,IACF3D,EAAakB,KAAKC,SAALD,CAAesD,aAA5BxE,EAA2C,MAA3CA,GACAA,EAAakB,KAAKC,SAAlBnB,EAA6B,QAA7BA,CAFE2D,IAGSzC,KAAKiC,eAALjC,KACXA,KAAKC,SAALD,CAAe5B,WAAf4B,CAA2BA,KAAKiC,eAAhCjC,GACAlB,EAAakB,KAAKC,SAALD,CAAesD,aAA5BxE,EAA2C,MAA3CA,CAFWkB,CAbsBiD,EAkBnCjD,KAAKyC,OAALzC,GAAeyC,CAlBoBQ;AAkBpBR,GArBsDM,EAqBtDN,EAGjBc,MAHiBd,GAGjB,UAAOe,CAAP,EAAOA;AASL,WAPAxE,MAAMyE,IAANzE,CAAWgB,KAAKC,SAALD,CAAe0D,QAA1B1E,EAAoCtB,OAApCsB,CAA4C,UAACkE,CAAD,EAAQd,CAAR,EAAQA;AAAAA,aAClDA,MAAQoB,CAARpB,GACItD,EAAaoE,CAAbpE,EAAoB,QAApBA,CADJsD,GAEI/C,EAAgB6D,CAAhB7D,EAAuB,QAAvBA,CAH8C+C;AAGvB,KAH7BpD,GAMAgB,KAAK2D,QAAL3D,GAAgBwD,CANhBxE,EAMgBwE,KACJf,OADIe,CACIA,CADJA,CAChB;AAAoBA,GAjCiDT,EAiCjDS,EAGtBI,KAHsBJ,GAGtB;AACE,gBAAYf,OAAZ,GAAsBzC,KAAKyC,OAALzC,CAAaqD,MAAnC,GAA4C,CAA5C;AAA4C,GArCyBN,EAqCzBnC,EAG9C2B,KAH8C,GAG9C;AAGE,SAFAvC,KAAK2D,QAAL3D,GAAK2D,CAAY,CAEjB,EAAO3D,KAAKC,SAALD,CAAe6D,SAAtB;AACE7D,WAAKC,SAALD,CAAe8D,WAAf9D,CAA2BA,KAAKC,SAALD,CAAe6D,SAA1C7D;AADF;;AAIAX,MAAgBW,KAAKC,SAALD,CAAesD,aAA/BjE,EAA8C,MAA9CA,GACAA,EAAgBW,KAAKC,SAArBZ,EAAgC,QAAhCA,CADAA;AACgC,GAhDqC0D,EAgDrCgB,CAhDqChB;AAgDrC,CA9EfjB,EJ6EU5C;AAAAA,IKpEzB8E,IAAuD;AAC3DC,YAAU,SADiD;AAE3DC,SAAO,QAFoD;AAG3DC,eAAY,CAH+C;AAI3DC,cAAW,CAJgD;AAK3DC,eAAa;AAAA,kBAAG7B,MAAH,CAA0B8B,KAA1B;AAA0BA,GALoB;AAM3DrB,gBAAc;AAAA,kBAAGT,MAAH,CAA0B8B,KAA1B;AAA0BA,GANmB;AAO3DC,UAAQ;AACNC,UAAMC,KAAKA,CAALA,GAAc,IAAIA,EAAOC,OAAX,EAAdD,GAAyBC,KAAY/B,CADrC;AAENgC,gBAAW;AAFL,GAPmD;AAW3DC,cAAY,CAX+C;AAY3DC,kBAAgB,CAZ2C;AAa3DC,oBAAiB,CAb0C;AAc3DC,gBAAa,CAd8C;AAe3DjF,eAAa,eAf8C;AAgB3DmC,mBAAiB,EAhB0C;AAiB3D+C,oBAAkB,GAjByC;AAkB3DC,aAAW,EAlBgD;AAmB3DxG,cAAY;AACVwB,eAAW,uDADD;AAEViF,YAAQ,0CAFE;AAGVC,iBAAa,OAHH;AAIVC,YAAQ,qBAJE;AAKVlF,UAAM,EALI;AAMVM,WAAO,EANG;AAOVqC,gBAAY,EAPF;AAQVE,UAAM,EARI;AASVL,cAAU;AATA,GAnB+C;AA8B3D2C,iBAAc,CA9B6C;AA+B3DC,qBAAmB,GA/BwC;AAgC3DC,cAAW,CAhCgD;AAiC3DC,eAAY,CAjC+C;AAkC3DC,cAAW;AAlCgD,CLoE9BvG;AAAAA,IK/BzBwG,IACJ,mEL8B6BxG;AAAAA,IK8DzByG,IAAyB;AAC7BC,iBAAc5B,CAAd4B,CAD6B;AAE7BnH,oBAAiBuF,EAAevF,UAAhCA,CAF6B;AAI7BoH,kCAAWD,CAAXC,EAAWD;AAAAA,QC1JXE,CD0JWF;AAAAA,QCzJXG,CDyJWH;AAAAA,QCxJXI,CDwJWJ;AAAAA,QCtJPK,CDsJOL;AAAAA,QCtJPK,QDsJOL;AACT,SAAKnB,CAAL,EACE,UAAUyB,KAAV,CAAgBR,CAAhB;AAGF,SAAKE,EAAQO,QAAb,EACE,UAAUD,KAAV,CAAgB,kCAAhB;AAIFlG,SAAK4F,OAAL5F,GAAK4F,MAAe5F,KAAK4F,OAApBA,EAAoBA,EAApBA,EAAgCA,CAAhCA,CAAL5F,EACAA,KAAKvB,UAALuB,GAAKvB,MAAkBuB,KAAKvB,UAAvBA,EAAuBA,EAAvBA,EAAsCmH,EAAQnH,UAA9CA,CADLuB,EAGAA,KAAKoG,OAALpG,GAAe,IAAIyE,CAAJ,EAHfzE,EAIAA,KAAKvB,UAALuB,CAAgBC,SAAhBD,IAAgBC,wBAAmCD,KAAK4F,OAAL5F,CAAakE,KAJhElE,EAMAA,KAAKqG,aAALrG,GAAqB,IAAIJ,CAAJ,CAAkB;AACrCE,mBAAaE,KAAK4F,OAAL5F,CAAaF,WADW;AAErCrB,kBAAY;AACVwB,mBAAWD,KAAKvB,UAALuB,CAAgBC,SADjB;AAEVC,cAAMF,KAAKvB,UAALuB,CAAgBE,IAFZ;AAGVM,eAAOR,KAAKvB,UAALuB,CAAgBQ;AAHb,OAFyB;AAOrCX,oBAAc,sBAAC2C,CAAD,EAACA;AAAAA,eAAW3B,EAAKO,QAALP,CAAc2B,CAAd3B,CAAX2B;AAAyBA;AAPH,KAAlB,CANrBxC,EAgBAA,KAAKkF,MAALlF,GAAc/C,EACZ,GADYA,EAEZ+C,KAAKvB,UAALuB,CAAgBkF,MAFJjI,EAGZ+C,KAAKqG,aAALrG,CAAmBC,SAHPhD,EAIZ;AACEqJ,aAAOtG,KAAK4F,OAAL5F,CAAaF,WADtB;AAEEyG,YAAM,GAFR;AAGEnG,eAAS,iBAACQ,CAAD,EAACA;AAAAA,eAAMC,EAAKT,OAALS,CAAaD,CAAbC,CAAND;AAAmBA;AAH/B,KAJY3D,CAhBd+C,EA2BAyE,EAAW+B,uBAAX/B,CAAmCzE,KAAKkF,MAAxCT,CA3BAzE,EA6BAA,KAAKmF,WAALnF,GAAmB/C,EACjB,GADiBA,EAEjB+C,KAAKvB,UAALuB,CAAgBmF,WAFClI,EAGjB+C,KAAKqG,aAALrG,CAAmBE,IAHFjD,EAIjB;AACEwJ,YAAM,GADR;AAEEF,YAAM,GAFR;AAGEnG,eAAS;AAAA,eAAMS,EAAK6F,YAAL7F,CAAkB,IAAlBA,EAAkB,CAAM,CAAxBA,CAAN;AAA8B;AAHzC,KAJiB5D,CA7BnB+C,EAwCAyE,EAAW+B,uBAAX/B,CAAmCzE,KAAKmF,WAAxCV,CAxCAzE,EA0CIA,KAAK4F,OAAL5F,CAAaqF,YAAbrF,KACFA,KAAK2G,UAAL3G,GAAkB,IAAI8B,CAAJ,CAAe;AAC/BC,mBAAa;AAAA,YAAGS,YAAH;AACX3B,UAAKwF,aAALxF,CAAmBL,KAAnBK,CAAyBW,KAAzBX,GAAiC2B,EAAO8B,KAAxCzD,EACAA,EAAKO,QAALP,CAAc;AAAEU,iBAAOiB,EAAO8B,KAAhB;AAAuBsC,gBAAMpE;AAA7B,SAAd3B,CADAA;AAC2C2B,OAHd;AAK/B/D,kBAAY;AACVoE,oBAAY7C,KAAKvB,UAALuB,CAAgB6C,UADlB;AAEVE,cAAM/C,KAAKvB,UAALuB,CAAgB+C,IAFZ;AAGVL,kBAAU1C,KAAKvB,UAALuB,CAAgB0C;AAHhB,OALmB;AAU/BT,uBAAiBjC,KAAK4F,OAAL5F,CAAaiC;AAVC,KAAf,CAAlBjC,EAaAA,KAAKqG,aAALrG,CAAmBE,IAAnBF,CAAwB5B,WAAxB4B,CAAoCA,KAAK2G,UAAL3G,CAAgBC,SAApDD,CAbAA,EAeAA,KAAKqG,aAALrG,CAAmBQ,KAAnBR,CAAyBhC,gBAAzBgC,CACE,OADFA,GC9NJ8F,IDiOQ,WAAClF,CAAD,EAACA;AAAAA,aAAqBC,EAAKgG,UAALhG,CAAgBD,CAAhBC,CAArBD;AAAqCA,KCjO9CkF,EDiO8ClF,YChO9CmF,IDiOQ/F,KAAK4F,OAAL5F,CAAasF,iBADyB1E,MChO9CmF,IAAO,GDgOuCnF,CCjO9CkF,EACO,WACPE,CADO,KACPA,KAAY,CADL,CADPF,EAEY;AAAA,qCAIDgB,gBAJC,EAIDA,KAJC,EAIDA,KAJC,EAIDA,GAJC;AAIDA;AAJC;;AAKNb,WACFc,aAAad,CAAbc,CADEd,EAIJA,IAAUe,WAAW;AACnBf,YAAU,IAAVA,EAEKD,KACHF,gBAAMgB,CAANhB,CAHFG;AAGQa,OAJAE,EAMPjB,CANOiB,CAJNf,EAYAD,MAAcC,CAAdD,IACFF,gBAAMgB,CAANhB,CAbEG;AAaIa,KD0MN9G,GC1MM8G,CDgNJ,CANF9G,CAfAA,EAwBAA,KAAKqG,aAALrG,CAAmBQ,KAAnBR,CAAyBhC,gBAAzBgC,CACE,SADFA,EAEE,UAACY,CAAD,EAACA;AAAAA,aAAqBC,EAAKoG,YAALpG,CAAkBD,CAAlBC,CAArBD;AAAuCA,KAF1CZ,EAE0CY,CACxC,CAHFZ,CAxBAA,EA8BAA,KAAKqG,aAALrG,CAAmBQ,KAAnBR,CAAyBhC,gBAAzBgC,CACE,SADFA,EAEE,UAACY,CAAD,EAACA;AAAAA,aAAqBC,EAAK6F,YAAL7F,CAAkBD,CAAlBC,EAAkBD,CAAG,CAArBC,CAArBD;AAA0C,KAF7CZ,EAE6C,CAC3C,CAHFA,CA/BEA,CA1CJA,EAgFAA,KAAKqG,aAALrG,CAAmBE,IAAnBF,CAAwBhC,gBAAxBgC,CACE,OADFA,EAEE,UAACY,CAAD,EAACA;AACCA,QAAErC,cAAFqC;AAAErC,KAHNyB,EAGMzB,CAEJ,CALFyB,CAhFAA;AAqFE,GAnGyB;AAuG7BkH,wBAAMC,CAAND,EAAMC;AAAAA,YAC0BnH,KAAK4F,OAD/BuB;AAAAA,QACIhD,gBADJgD;AAAAA,QACgBjD,WADhBiD;;AAQJ,QALAnH,KAAKmH,GAALnH,GAAWmH,CAAXnH,EACImE,KACFnE,KAAKoG,OAALpG,CAAaoH,KAAbpH,CAAmBmH,CAAnBnH,CAFFA,EAKc,UAAVkE,CAAJ,EAAqB;AACnB,UAAMmD,IAAOF,EACVG,YADUH,GAEVI,aAFUJ,CAEI,4BAFJA,CAAb;AAIAnH,WAAKC,SAALD,GAAiB/C,EACf,KADeA,EAEf,iDAFeA,CAAjB+C,EAKAA,KAAKC,SAALD,CAAe5B,WAAf4B,CAA2BA,KAAKqG,aAALrG,CAAmBE,IAA9CF,CALAA,EAMAqH,EAAMjJ,WAANiJ,CAAkBrH,KAAKC,SAAvBoH,CANArH;AAUF;;AAAA,WADAyE,EAAW+B,uBAAX/B,CAAmCzE,KAAKqG,aAALrG,CAAmBE,IAAtDuE,GAAsDvE,KAC1CmG,aAD0CnG,CAC5BD,SAA1B;AAA0BA,GA9HC;AAiI7BuH;AAAAA;AAEE,6BADKvH,SACL,KADKA,EAAWX,MAAXW,EACL,EADgBX,IAChB;AADgBA,GAlIW;AAsI7Bc,4BAAQ9B,CAAR8B,EAAQ9B;AACNA,MAAMC,cAAND,IACAA,EAAMD,eAANC,EADAA;AACMD,YAEuB2B,KAAKqG,aAF5BhI;AAAAA,QAEE4B,eAFF5B;AAAAA,QAEamC,WAFbnC;AAIF4B,MAAUlB,SAAVkB,CAAoBd,QAApBc,CAA6B,QAA7BA,KACFZ,EAAgBY,CAAhBZ,EAA2B,QAA3BA,GACAW,KAAK0G,YAAL1G,EAFEC,KAIFnB,EAAamB,CAAbnB,EAAwB,QAAxBA,GACA0B,EAAMS,KAANT,EALEP;AAKIgB,GAjJmB;AAqJ7BgG,sCAAa3I,CAAb2I,EAAa3I;AACX,SACwE,CADxE,KACE,CAACkB,CAAD,EAAYC,CAAZ,EAA4BC,CAA5B,EAA0C7B,OAA1C,CAAkDS,EAAMoD,OAAxD,CADF,EAQA,IAFApD,EAAMC,cAAND,IAEIA,EAAMoD,OAANpD,KAAkBkB,CAAtB;AAMA,UAAMiI,IAAMzH,KAAK2G,UAAL3G,CAAgB4D,KAAhB5D,KAA0B,CAAtC;;AACA,YAAIyH,IAAM,CAAV;AAAA,YAIQ9D,IAAa3D,KAAK2G,UAAL3G,CAAb2D,QAJR;AAAA,YAKM+D,IAAOpJ,EAAMoD,OAANpD,KAAkBmB,CAAlBnB,GAAmCqF,IAAW,CAA9CrF,GAAkDqF,IAAW,CAL1E;AAAA,YAQMZ,IAAO/C,KAAK2G,UAAL3G,CAAgBuD,MAAhBvD,CAFD0H,IAAO,CAAPA,GAAWD,CAAXC,GAAiBA,IAAOD,CAAPC,GAAa,CAAbA,GAAiBA,CAEjC1H,CARb;AASAA,aAAKqG,aAALrG,CAAmBQ,KAAnBR,CAAyBwB,KAAzBxB,GAAiC+C,EAAKuB,KAAtCtE;AAAsCsE;AAAAA,KAhBtC;AACE,UAAMvB,IAAO/C,KAAK2G,UAAL3G,CAAgBuD,MAAhBvD,CAAuBA,KAAK2G,UAAL3G,CAAgB2D,QAAvC3D,CAAb;AACAA,WAAKoB,QAALpB,CAAc;AAAEuB,eAAOvB,KAAKqG,aAALrG,CAAmBQ,KAAnBR,CAAyBwB,KAAlC;AAAyCoF,cAAM7D;AAA/C,OAAd/C;AAA6D+C;AAAAA,GAhKpC;AAiL7B2D,sCAAapI,CAAboI,EAA0CiB,CAA1CjB,EAA0CiB;AACxC,mBADwCA,CACxC,KADwCA,KAAQ,CAChD,GADgD,CAC5CrJ,CAD4C,IHxU1B,OGyUTA,EAAMoD,OAAnB;AAAA,cAIqC1B,KAAK4F,OAJ1C;AAAA,UAIoBP,kBAJpB;AAIoBA,OAEhBsC,CAFgBtC,IAEhBsC,EAFInC,UAAYH,KAGlBrF,KAAKqG,aAALrG,CAAmBQ,KAAnBR,CAAyBwB,KAAzBxB,GAAiC,EAAjCA,EACAA,KAAKoG,OAALpG,CAAa4H,WAAb5H,EAJkBqF,GAOhBA,KACFrF,KAAK2G,UAAL3G,CAAgBuC,KAAhBvC,EARkBqF;AAQF9C;AAAAA,GA9LS;AAkMvBsE,kCAAWvI,CAAXuI,EAAWvI;AAAAA;AAAAA,cAMM0B,IANN1B;AACf,UAAIqB,EAAa9B,OAAb8B,CAAqBrB,EAAMoD,OAA3B/B,IAA2B+B,CAAY,CAA3C,EACE;;AAGF,UAAMH,IAASjD,EAAM4D,MAAN5D,CAAkCkD,KAAjD;AAAA,UACQ2E,IAAa9E,EAAKuE,OAALvE,CAAb8E,QADR;AAAA,UACQA;AAAAA,YAEJ5E,EAAM8B,MAFF8C,EAEE9C,uBACY8C,EAAU0B,MAAV1B,CAAiB;AAAE5E;AAAF,SAAjB4E,CADZ9C,EAC+B9B,IAD/B8B,CAC+B9B,UAAnCkB,CAAmClB,EAAnCkB;AACJA,cAAUA,EAAQqF,KAARrF,CAAc,CAAdA,EAAiBpB,EAAKuE,OAALvE,CAAawD,cAA9BpC,CAAVA,EACApB,EAAKsF,UAALtF,CAAgB2B,MAAhB3B,CAAuBoB,CAAvBpB,EAAgCA,EAAKuE,OAALvE,CAAa4B,YAA7C5B,CADAoB;AAC6CQ,SAHrCI;AAKRhC,UAAKsF,UAALtF,CAAgBkB,KAAhBlB;AAAgBkB,OAPV4D,EADR;;AAQkB5D;AA/MS,KAkMZjE,CAlMY;AAAA;AAAA;AAAA;AAmNvB8C,8BAASG,CAATH,EAASG;AAAAA;AAAAA,cACQvB,IADRuB;AACQvB,+BAAK4F,OAALmC,CAAb5B,QAAa4B,CAEWF,MAFXE,CAEkBxG,CAFlBwG,GAEkBxG,IAFlBvB,CAEkBuB,UAAjCkB,CAAiClB,EAAjCkB;AAEFA,aAAWA,EAAQY,MAARZ,GAAiB,CAA5BA,IACFsF,EAAKC,UAALD,CAAgBtF,EAAQ,CAARA,CAAhBsF,EAA4BxG,CAA5BwG,CADEtF;AAC0BlB,OALTvB;AApNM,KAmNduB,CAnNc;AAAA;AAAA;AAAA;AA6N7ByG,kCAAWxF,CAAXwF,EAAmBzG,CAAnByG,EAAmBzG;AAAAA,YACgBvB,KAAK4F,OADrBrE;AAAAA,QACTgE,eADShE;AAAAA,QACEkE,eADFlE;AAAAA,QAGX6E,IAAUpG,KAAKoG,OAALpG,CAAaiI,SAAbjI,EAHCuB;AAIb6E,MAAQ/C,MAAR+C,IAAkBpG,KAAK4F,OAAL5F,CAAa4E,UAA/BwB,IACFpG,KAAKoG,OAALpG,CAAakI,WAAblI,CAAyBoG,EAAQ,CAARA,CAAzBpG,CADEoG;AAIJ,QAAM7B,IAASvE,KAAKmI,SAALnI,CAAewC,CAAfxC,EAAuBuB,CAAvBvB,CAAf;AAEIyF,SACFzF,KAAKoI,SAALpI,CAAewC,CAAfxC,CADEyF,EAIJzF,KAAKmH,GAALnH,CAASqI,SAATrI,CAAmB,wBAAnBA,EAA6C;AAC3CsI,gBAAU9F,CADiC;AAE3C+B;AAF2C,KAA7CvE,CAJIyF,EASAF,KACFvF,KAAKuI,YAALvI,EAVEyF;AAUG8C,GAjPoB;AAqP7BA;AAAAA,QACUtI,IAAcD,KAAKqG,aAALrG,CAAdC,SADVsI;AAGMtI,MAAUlB,SAAVkB,CAAoBd,QAApBc,CAA6B,QAA7BA,KACFZ,EAAgBY,CAAhBZ,EAA2B,QAA3BA,CADEY,EAIJD,KAAK0G,YAAL1G,EAJIC;AAICyG,GA5PsB;AA+P7ByB,gCAAU3F,CAAV2F,EAAkB5G,CAAlB4G,EAAkB5G;AAAAA;AAAAA,YACoCvB,KAAK4F,OADzCrE;AAAAA,QACAqE,MAARrB,MADQhD;AAAAA,QACS6C,eADT7C;AAAAA,QACoB8C,iBADpB9C;AAAAA,QAEVgD,IAAS,IAAIE,CAAJ,CAAa,CAACjC,EAAOgG,CAAR,EAAWhG,EAAOiG,CAAlB,CAAb,EAAmC7C,CAAnC,CAFCrE;AAAAA,QAGZmH,IAAalG,EAAO8B,KAHR/C;AA0BhB,WArB2B,qBAAhB8C,CAAgB,KACzBqE,IAAarE,EAAY;AAAE9C,cAAF;AAASiB;AAAT,KAAZ6B,CADY,GAI3BE,EAAOoE,SAAPpE,CAAiBmE,CAAjBnE,CAJ2B,EAM3BvE,KAAKoG,OAALpG,CAAa4I,QAAb5I,CAAsBuE,CAAtBvE,CAN2B,EAQvBoE,KACFG,EAAOsE,SAAPtE,EATyB,EAYvBqB,EAAQjB,SAARiB,IACFrB,EAAOuE,EAAPvE,CAAU,SAAVA,EAAqB,UAACuC,CAAD,EAACA;AACpBiC,QAAK5B,GAAL4B,CAASV,SAATU,CAAmB,0BAAnBA,EAA+C;AAC7CT,kBAAU/D,EAAOyE,SAAPzE,EADmC;AAE7CjG,eAAOwI;AAFsC,OAA/CiC;AAESjC,KAHXvC,CAbyB,EAqBpBA,CAAP;AAAOA,GAzRoB;AA4R7B6D,gCAAU5F,CAAV4F,EAAU5F;AAAAA,YACiCxC,KAAK4F,OADtCpD;AAAAA,QACAsC,qBADAtC;AAAAA,QACiBuC,iBADjBvC;AAAAA,QAGFyG,IAAezG,EAAO0G,MAAP1G,GACjB,IAAIiC,CAAJ,CAAmBjC,EAAO0G,MAA1B,CADiB1G,GAEjB,IAAIiC,CAAJ,CAAajC,EAAOgG,CAApB,EAAuBhG,EAAOiG,CAA9B,EAAiCU,QAAjC,CAA0C,EAA1C,CALI3G;AAAAA,QAOF0G,IAASD,EAAaG,OAAbH,KACXA,CADWA,GAEXjJ,KAAKoG,OAALpG,CAAaqJ,SAAbrJ,EATIwC;AASS6G,KAEZvE,CAFYuE,IAEOJ,EAAaG,OAAbH,EAFPI,IAEoBD,CAAc5G,EAAO0G,MAFzCG,IAMLvE,CANKuE,IAMLvE,CAAmBmE,EAAaG,OAAbH,EANdI,GAGfrJ,KAAKmH,GAALnH,CAASsJ,OAATtJ,CAAiBkJ,EAAOK,SAAPL,EAAjBlJ,EAAqCA,KAAKwJ,OAALxJ,EAArCA,EAAqD;AACnDyJ,eAAS1E;AAD0C,KAArD/E,CAHeqJ,GAOfrJ,KAAKmH,GAALnH,CAAS0J,SAAT1J,CAAmBkJ,CAAnBlJ,EAA2B;AAAEyJ,eAAS1E;AAAX,KAA3B/E,CAPeqJ;AAOuBtE,GA5Sb;AAoT7ByE;AAAAA,YACyCxJ,KAAK4F,OAD9C4D;AAAAA,QAC2BvE,eAD3BuE;AAEE,aADQ1E,eACR,GAAyB9E,KAAKmH,GAALnH,CAASwJ,OAATxJ,EAAzB,GAA8CiF,CAA9C;AAA8CA;AAtTnB,CL9DA/F;;AKoXmB+F,SAI1B0E,CAJ0B1E,GAI1B0E;AACtB,OAAKlF,CAAL,EACE,UAAUyB,KAAV,CAAgBR,CAAhB;;AAAgBA,OAGlB,IAAMkE,IAAWnF,EAAUoF,MAAVpF,CAAiBkB,CAAjBlB,CAAjB,EAAkCkB,oBAAlC,EALuCC,gBAKvC,EALuCA,KAErBF,EAFqBE,KAErBF,EAFqBE,GAErBF;AAFqBE;AAErBF;;AAIlB,WAAWkE,CAAX,EAAuBhE,CAAvB;AAAuBA;;AAAAA,CJhczB,UAAYrG,CAAZ,EAAYA;AACVA,8BACAA,4BADAA;AADF,EAAYA,aAAZ,CIgcyBqG;;AJhcbrG,IA2BkBuK;AAM5B,aAAYlE,CAAZ,EAAYA;AAAAA,yBAA2B,EAA3BA,GACV5F,KAAK4F,OAAL5F,GAAe4F,CADLA;AACKA;;AAAAA;AAAAA,WAQjBmE,cARiBnE,GAQjB,UAAeoE,CAAf,EAAeA;AAAAA,yBAAyB,EAAzBA;AACb,QAAMC,UAAWjK,KAAK4F,OAAL5F,CAAagK,MAAxBC,EAAwBD,EAAxBC,EAAmCD,CAAnCC,CAAN;AACA,WAAOzM,OAAOC,IAAPD,CAAYyM,CAAZzM,EACJ2J,GADI3J,CAEH,UAACG,CAAD,EAACA;AAAAA,aAAWuM,mBAAmBvM,CAAnBuM,IAAmBvM,GAAnBuM,GAA2BA,mBAAmBD,EAAItM,CAAJsM,CAAnBC,CAAtCvM;AAA6DA,KAF3DH,EAIJoB,IAJIpB,CAIC,GAJDA,CAAP;AAIQ,GAdOoI,EAcPhF,EAGVuJ,MAHU,GAGV,UAAOC,CAAP,EAAoBJ,CAApB,EAAoBA;AAClB,WAAUI,UAAOpK,KAAK+J,cAAL/J,CAAoBgK,CAApBhK,CAAjB;AAAqCgK,GAlBtBpE,EAkBsBoE,EAGjCnC,MAHiCmC,GAGjCnC,UAAOjC,CAAPiC,EAAOjC;AAAAA;AAAAA,cACC5F,IADD4F;AAAAA,UACLwE,IAAMjH,EAAKkH,QAALlH,CAAc;AACxB5B,eAAOqE,EAAQrE,KADS;AAExB3D,cAAM2B,EAAY+K;AAFM,OAAdnH,CADDyC;AAGS0E,6BAGEC,MAAMH,CAANG,CAHFD,EAGQF,IAHRE,CAGQF,UAAtBI,CAAsBJ,EAAtBI;AAAAA,+BAC6BA,EAAQC,IAARD,EAD7BA,EACqCC,IADrCD,CACqCC,UAArCA,CAAqCA,EAArCA;AACN,mBAAYC,KAAZ,CAAkB;AAAE9D,kBAAM6D;AAAR,WAAlB;AAA0BA,SAFpBD;AAEoBC,OALNH;AAKMG,KARf7E,CAQe6E;AAAAA;AAAAA;AAAAA,GA7BX7E,EA6BW6E,CA7BX7E;AA6BW6E,CApCAX,EA3BlBvK;AAAAA,IMoCSoL;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA,WAInBN,QAJmBM,GAInB;AAEE,WAAO,+CAAP;AAAO,GANUA,EAMVC,EAOTC,uBAPS,GAOT,UAAwBC,CAAxB,EAAwBA;AACtB,QAAMC,IACJD,EAAIE,IAAJF,CAAS,UAACG,CAAD,EAACA;AAAAA,aAAyB,WAAlBA,EAAGC,UAAVD;AAAUC,KAApBJ,KACAA,EAAIE,IAAJF,CAAS,UAACG,CAAD,EAACA;AAAAA,aAAyB,cAAlBA,EAAGC,UAAVD;AAAUC,KAApBJ,CAFF;AAGA,WAAOC,IAAQD,EAAIjN,OAAJiN,CAAYC,CAAZD,CAARC,GAA6B,CAApC;AAAoC,GAjBnBJ,EAiBmBC,EAOtCO,QAPsC,GAOtC,UAAS3I,CAAT,EAASA;AAAAA;AACP,WAAO,cAELA,EAAO4I,YAFF,IAEEA,MAFF,GAELC,UACErL,KAAK6K,uBAAL7K,CACEwC,EAAO8I,gBAAP9I,CAAwB4I,YAAxB5I,CAAwB4I,OAD1BpL,CADFqL,CAFK,EAIuBD,aAI5B5I,EAAO+I,IAJqBH,IAIrBG,MAJqBH,GAI5BI,UACExL,KAAK6K,uBAAL7K,CAA6BwC,EAAO8I,gBAAP9I,CAAwB+I,IAAxB/I,CAAwB+I,OAArDvL,CADFwL,CARK,EAYLhJ,EAAOiJ,cAAPjJ,CACExC,KAAK6K,uBAAL7K,CAA6BwC,EAAO8I,gBAAP9I,CAAwBiJ,cAArDzL,CADFwC,CAZK,EAakDiJ,aAGvDjJ,EAAOkJ,QAHgDD,IAGhDC,MAHgDD,GAGvDE,EACE3L,KAAK6K,uBAAL7K,CAA6BwC,EAAO8I,gBAAP9I,CAAwBkJ,QAArD1L,CADF2L,CAhBK,EAiBkDD,aAGvDlJ,EAAOoJ,OAHgDF,IAGhDE,MAHgDF,GAGvDG,SApBK,EAsBJnN,MAtBI,CAsBGC,OAtBH,EAuBJC,IAvBI,CAuBC,IAvBD,CAAP;AAuBQ,GAhDS+L,EAgDTC,EAGVF,KAHU,GAGV,UAAMoB,CAAN,EAAMA;AAAAA;AACJ,WAAOA,EAASlF,IAATkF,CAAcC,IAAdD,CAAmB3E,GAAnB2E,CAAuB,UAAClB,CAAD,EAACA;AAAAA,aAAO;AACpCnC,WAAGmC,EAAEoB,OAAFpB,CAAUqB,GADuB;AAEpCzD,WAAGoC,EAAEoB,OAAFpB,CAAUsB,GAFuB;AAGpC5H,eAAOzD,EAAKsK,QAALtK,CAAc+J,CAAd/J,CAH6B;AAIpCqI,gBAAQ,IAJ4B;AAKpCiD,aAAKvB;AAL+B,OAAPA;AAKxBA,KALAkB,CAAP;AAKOlB,GAzDUD,EAyDVC,EAIH/C,MAJG+C,GAIH/C;AAAAA,QAAStG,WAATsG;;AAAStG;AAAAA,cAGevB,IAHfuB;AAAAA,UACPyI,IAA0B,mBAAVzI,CAAU,GAAW;AAAEA;AAAF,OAAX,GAAuBA,CAD1CA;AAC0CA,6BAEjCgJ,MAAMlJ,EAAKgJ,QAALhJ,EAANkJ,EAAuB;AAC3C6B,gBAAQ,MADmC;AAE3CzK,cAAM0K,KAAKC,SAALD,CAAKC,MACNjL,EAAKuE,OAALvE,CAAa2I,MADPsC,EACOtC,EADPsC,EAENtC,CAFMsC,CAALD;AAFqC,OAAvB9B,CAFiChJ,EAMhDyI,IANgDzI,CAMhDyI,UAJDQ,CAICR,EAJDQ;AAAAA,+BAQaA,EAAQC,IAARD,EARbA,EAQqBC,IARrBD,CAQqBC,UAArBA,CAAqBA,EAArBA;AACN,mBAAYC,KAAZ,CAAkB;AAAE9D,kBAAM6D;AAAR,WAAlB;AAA0BA,SATpBD;AASoBC,OAX6BlJ;AAW7BkJ,KAZblJ,CAYakJ;AAAAA;AAAAA;AAAAA,GAzETE,EAyESF,CAzETE;AAyESF,CAzETE,CAAiBb,CAAjBa,CNpCTpL;AAAAA,IOsBSgN;AAArB;AAAA;AAAA,8DAIc,gDAJd,EAIc3L,CAJd;AAIc;;AAAA4L;AAAA;AAAA,WAEZnC,QAFY,GAEZ;AAAA,QAAW9I,WAAX;AAAA,QACQyI,IAA0B,mBAAVzI,CAAU,GAAW;AAAEkL,SAAGlL;AAAL,KAAX,GAA0BA,CAD5D;AAIE,WAFAyI,EAAO0C,KAAP1C,GAAO0C,EAFSA,KAEhB1C,EAFgB0C,KAIJvC,MAJIuC,CAIG1M,KAAK2M,SAJRD,EAImB1C,CAJnB0C,CAIhB;AAAmC1C,GANzB,EAMyBA,EAGrCU,KAHqCV,GAGrC,UAAM8B,CAAN,EAAMA;AACJ,WAA0C,MAAtCA,EAASlF,IAATkF,CAAcc,YAAdd,CAA2BzI,MAAW,GACjC,EADiC,GAInCyI,EAASlF,IAATkF,CAAcc,YAAdd,CAA2B,CAA3BA,EAA8Be,SAA9Bf,CAAwC3E,GAAxC2E,CAA4C,UAAClB,CAAD,EAACA;AAAAA,aAAO;AACzDnC,WAAGmC,EAAEkC,KAAFlC,CAAQmC,WAARnC,CAAoB,CAApBA,CADsD;AAEzDpC,WAAGoC,EAAEkC,KAAFlC,CAAQmC,WAARnC,CAAoB,CAApBA,CAFsD;AAGzDtG,eAAOsG,EAAEoC,OAAFpC,CAAUqC,gBAHwC;AAIzD/D,gBAAQ,CACN,CAAC0B,EAAEsC,IAAFtC,CAAO,CAAPA,CAAD,EAAYA,EAAEsC,IAAFtC,CAAO,CAAPA,CAAZ,CADM,EAEN,CAACA,EAAEsC,IAAFtC,CAAO,CAAPA,CAAD,EAAYA,EAAEsC,IAAFtC,CAAO,CAAPA,CAAZ,CAFM,CAJiD;AAQzDuB,aAAKvB;AARoD,OAAPA;AAQ7CA,KARAkB,CAJP;AAYOlB,GAtBG,EAsBHA,EAIH/C,MAJG+C,GAIH/C;AAAAA,QRnCNuC,CQmCMvC;AAAAA,QRlCN/B,CQkCM+B;AAAAA,QRhCAsF,CQgCAtF;AAAAA,QAAStG,WAATsG;;AAAStG;AAAAA,cAGXvB,IAHWuB;AAAAA,UACPmL,uBAAyBU,KAAKC,GAALD,EADlB7L;AACuB8L,8BRpCtCjD,IQsCI/I,EAAKgJ,QAALhJ,CAAc;AAAEE,gBAAF;AAASmL;AAAT,OAAdrL,CRtCJ+I,EACAtE,IQsCI4G,CRvCJtC,EAGM+C,IAASlQ,EAAc,QAAdA,EAAwB,IAAxBA,EAA8BM,SAASoE,IAAvC1E,CAHfmN,EAIA+C,EAAOhP,YAAPgP,CAAoB,MAApBA,EAA4B,iBAA5BA,CAJA/C,EAI4B,IAEjB9I,OAFiB,CAET,UAACgM,CAAD,EAACA;AACjBC,eAAezH,CAAfyH,IAAqB,UAAC9C,CAAD,EAACA;AACrB0C,YAAO7N,MAAP6N,IAAO7N,OACCiO,OAAezH,CAAfyH,CADRJ,EAEAG,EAAQ7C,CAAR6C,CAFAH;AAEQ1C,SAHT8C,EAMDJ,EAAOhP,YAAPgP,CAAoB,KAApBA,EAA2B/C,CAA3B+C,CANCI;AAM0BnD,OATD,CQgCUiD,GRvBTjD,IQuBSiD,CRvBTjD,UQwBrBK,CRxBqBL,EQwBrBK;AAKN,iBAAYC,KAAZ,CAAkB;AAAE9D,gBAAM6D;AAAR,SAAlB;AAA0BA,OANU4C;AAMV5C,KAPblJ,CAOakJ;AAAAA;AAAAA;AAAAA,GAjChB,EAiCgBA,CAjChB;AAiCgBA,CArCT8B,CAAqBzC,CAArByC,CPtBThN;AAAAA,IQCSiO;AAArB;AAAA;AAAA,8DAKI,0EALJ,EAKI5M,CALJ;AAKI;;AAAA4L;AAAA;AAAA,WAEFnC,QAFE,GAEF;AAAA,QAAW9I,WAAX;AAAA,QACQyI,IAA0B,mBAAVzI,CAAU,GAAW;AAAEkF,YAAMlF;AAAR,KAAX,GAA6BA,CAD/D;AAIE,WAFAyI,EAAOyD,CAAPzD,GAAW,MAAXA,EAAW,KAECG,MAFD,CAEQnK,KAAK2M,SAFb,EAEwB3C,CAFxB,CAEX;AAAmCA,GANnC,EAMmCA,EAGrCU,KAHqCV,GAGrC,UAAMxH,CAAN,EAAMA;AACJ,WAAOA,EAAOoE,IAAPpE,CAAYkL,SAAZlL,CAAsB2E,GAAtB3E,CAA0B,UAACoI,CAAD,EAACA;AAAAA,aAAO;AACvCnC,WAAGmC,EAAE+C,OAAF/C,CAAUgD,QAAVhD,CAAmBnC,CADiB;AAEvCD,WAAGoC,EAAE+C,OAAF/C,CAAUgD,QAAVhD,CAAmBpC,CAFiB;AAGvClE,eAAOsG,EAAE1L,IAH8B;AAIvCgK,gBAAQ,CACN,CAAC0B,EAAEiD,MAAFjD,CAASkD,IAAV,EAAgBlD,EAAEiD,MAAFjD,CAASmD,IAAzB,CADM,EAEN,CAACnD,EAAEiD,MAAFjD,CAASoD,IAAV,EAAgBpD,EAAEiD,MAAFjD,CAASqD,IAAzB,CAFM,CAJ+B;AAQvC9B,aAAKvB;AARkC,OAAPA;AAQ3BA,KARApI,CAAP;AAQOoI,GAlBP,EAkBOA,CAlBP;AAkBOA,CAvBU4C,CAAqB1D,CAArB0D,CRDTjO;AAAAA,ISoES2O;AAWnB,aAAYtI,CAAZ,EAAYA;AAAAA;AAAAA,gCAAiC,EAAjCA,GAAiC,CAC3C/E,iBAAM+E,CAAN/E,KAAM+E,IADqC,EAEtCuI,IAFsC,GAE/BvI,EAAQuI,IAARvI,IAAgB,uBAFlBA,EAEkBgF,CAFlBhF;AAEkB;;AAAA4G;AAAA;AAAA,WAU9BnC,QAV8B,GAU9B;AAAA,QAAW9I,WAAX;;AACE,cADgB3D,IAChB;AAaE,WAAK2B,EAAY6O,OAAjB;AAEE,oBAAYjE,MAAZ,CAAsBnK,KAAKmO,IAALnO,GAAKmO,aAA3B,EADuC,mBAAV5M,CAAU,GAAW,EAAX,GAAgBA,CACvD;;AAGF;AAGE,oBAAY4I,MAAZ,CAAsBnK,KAAKmO,IAALnO,GAAKmO,kBAA3B,EADmB,mBAAV5M,CAAU,GAAW;AAAEkF,gBAAMlF;AAAR,SAAX,GAA6BA,CAChD;AArBJ;AAoBoDA,GA/BxB,EA+BwBA,EAKtDmJ,KALsDnJ,GAKtD,UAAMuK,CAAN,EAAMA;AACJ,WAAOA,EAASlF,IAATkF,CAAcuC,QAAdvC,CAAuB3E,GAAvB2E,CAA2B,UAAC6B,CAAD,EAACA;AACjC,UAAMW,IAA+B;AACnC7F,WAAGkF,EAAQC,QAARD,CAAiBZ,WAAjBY,CAA6B,CAA7BA,CADgC;AAEnCnF,WAAGmF,EAAQC,QAARD,CAAiBZ,WAAjBY,CAA6B,CAA7BA,CAFgC;AAGnCrJ,eAAOqJ,EAAQY,UAARZ,CAAmBrJ,KAHS;AAInC4E,gBAAQ,IAJ2B;AAKnCiD,aAAKwB;AAL8B,OAArC;AAiBA,aAPI3O,MAAMC,OAAND,CAAc2O,EAAQT,IAAtBlO,KAAuD,MAAxB2O,EAAQT,IAARS,CAAatK,MAA5CrE,KACFsP,EAAIpF,MAAJoF,GAAa,CACX,CAACX,EAAQT,IAARS,CAAa,CAAbA,CAAD,EAAkBA,EAAQT,IAARS,CAAa,CAAbA,CAAlB,CADW,EAEX,CAACA,EAAQT,IAARS,CAAa,CAAbA,CAAD,EAAkBA,EAAQT,IAARS,CAAa,CAAbA,CAAlB,CAFW,CADX3O,GAOGsP,CAAP;AAAOA,KAlBFxC,CAAP;AAkBSwC,GAvDmB,EAuDnBA,CAvDmB;AAuDnBA,CApEQJ,CAAuBpE,CAAvBoE,CTpET3O;AAAAA,IUtBSiP;AACnB,aAAY5I,CAAZ,EAAYA;AAAAA,gCAAiC,EAAjCA,GACVA,EAAQuI,IAARvI,GAAe,2BADLA,EACK7B,aACT6B,CADS,KACTA,IAFIA;AAEJA;;AAAAA;AAAAA,CAHW4I,CAA6BN,CAA7BM,CVsBTjP;AAAAA,IWWSkP;AAArB;AAAA;AAAA,8DAIc,mDAJd,EAIc7N,CAJd;AAIc;;AAAA4L;AAAA;AAAA,WAEZnC,QAFY,GAEZ;AAAA,QAAW9I,WAAX;AAEE,gBAAY4I,MAAZ,CAAmBnK,KAAK2M,SAAxB,EADgC,mBAAVpL,CAAU,GAAW;AAAEyL,eAASzL;AAAX,KAAX,GAAgCA,CAChE;AADgEA,GAHtD,EAGsDA,EAIlEmJ,KAJkEnJ,GAIlE,UAAMiB,CAAN,EAAMA;AACJ,WAAOA,EAAOoE,IAAPpE,CAAYC,OAAZD,CAAoB2E,GAApB3E,CAAwB,UAACoI,CAAD,EAACA;AAAAA,aAAO;AACrCnC,WAAGmC,EAAEgD,QAAFhD,CAAWtC,QAAXsC,CAAoBqB,GADc;AAErCzD,WAAGoC,EAAEgD,QAAFhD,CAAWtC,QAAXsC,CAAoBsB,GAFc;AAGrC5H,eAAOsG,EAAE8D,iBAH4B;AAIrCxF,gBAAQ,CACN,CAAC0B,EAAEgD,QAAFhD,CAAW+D,QAAX/D,CAAoBgE,SAApBhE,CAA8BsB,GAA/B,EAAoCtB,EAAEgD,QAAFhD,CAAW+D,QAAX/D,CAAoBgE,SAApBhE,CAA8BqB,GAAlE,CADM,EAEN,CAACrB,EAAEgD,QAAFhD,CAAW+D,QAAX/D,CAAoBiE,SAApBjE,CAA8BsB,GAA/B,EAAoCtB,EAAEgD,QAAFhD,CAAW+D,QAAX/D,CAAoBiE,SAApBjE,CAA8BqB,GAAlE,CAFM,CAJ6B;AAQrCE,aAAKvB;AARgC,OAAPA;AAQzBA,KARApI,CAAP;AAQOoI,GAhBG,EAgBHA,CAhBG;AAgBHA,CApBU6D,CAAuB3E,CAAvB2E,CXXTlP;AAAAA,IYeSuP;AAArB;AAAA;AAAA,8DAIc,+CAJd,EAIclO,CAJd;AAIc;;AAAA4L;AAAA;AAAA,WAEZnC,QAFY,GAEZ;AAAA,QAAW9I,WAAX;AAEE,gBAAY4I,MAAZ,CAAmBnK,KAAK2M,SAAxB,EADgC,mBAAVpL,CAAU,GAAW;AAAEkL,SAAGlL;AAAL,KAAX,GAA0BA,CAC1D;AAD0DA,GAHhD,EAGgDA,EAI5DmJ,KAJ4DnJ,GAI5D,UAAMuK,CAAN,EAAMA;AACJ,WAAOA,EAASlF,IAATkF,CAAciD,KAAdjD,CAAoB3E,GAApB2E,CAAwB,UAAClB,CAAD,EAACA;AAAAA,aAAO;AACrCnC,WAAGmC,EAAE3G,QAAF2G,CAAWqB,GADuB;AAErCzD,WAAGoC,EAAE3G,QAAF2G,CAAWsB,GAFuB;AAGrC5H,eAAOsG,EAAEoC,OAAFpC,CAAUtG,KAHoB;AAIrC4E,gBAAQ,IAJ6B;AAKrCiD,aAAKvB;AALgC,OAAPA;AAKzBA,KALAkB,CAAP;AAKOlB,GAbG,EAaHA,CAbG;AAaHA,CAjBUkE,CAAqBhF,CAArBgF,CZfTvP;AAAAA,IaQSyP;AAOnB,aAAYpJ,CAAZ,EAAYA;AAAAA;AAAAA,yBAAwC,EAAxCA;AAGV,QAAMuI,IAAO,qCAAb;AAAa,YAFbtN,iBAAM+E,CAAN/E,KAAM+E,IAEO,EACR+G,SADQ,GACI/G,EAAQ+G,SAAR/G,IAAwBuI,aAD5B,EAEbtN,EAAKoO,UAALpO,GAAkB+E,EAAQqJ,UAARrJ,IAAyBuI,cAF9B,EAE8BA,CAF9B;AAE8BA;;AAAAA;AAAAA;AAAAA,WAG7C9D,QAH6C8D,GAG7C;AAAA,QAAW5M,WAAX;AAAA,QAAkB3D,UAAlB;AAAA,QACQoM,IAA0B,mBAAVzI,CAAU,GAAW;AAAEkL,SAAGlL;AAAL,KAAX,GAA0BA,CAD5D;;AAIE,YAFAyI,EAAOkF,MAAPlF,GAAgB,MAAhBA,EAEQpM,CAAR;AACE,WAAK2B,EAAY6O,OAAjB;AACE,oBAAYjE,MAAZ,CAAmBnK,KAAKiP,UAAxB,EAAoCjF,CAApC;;AAEF;AACE,oBAAYG,MAAZ,CAAmBnK,KAAK2M,SAAxB,EAAmC3C,CAAnC;AALJ;AAKuCA,GAZImE,EAYJnE,EAIzCU,KAJyCV,GAIzC,UAAM8B,CAAN,EAAMA;AAKJ,YAJgB9M,MAAMC,OAAND,CAAc8M,EAASlF,IAAvB5H,IACZ8M,EAASlF,IADG5H,GAEZ,CAAC8M,EAASlF,IAAV,CAEJ,EAAeO,GAAf,CAAmB,UAACyD,CAAD,EAACA;AAAAA,aAAO;AACzBnC,WAAGpG,OAAOuI,EAAEuE,GAAT9M,CADsB;AAEzBmG,WAAGnG,OAAOuI,EAAEsB,GAAT7J,CAFsB;AAGzBiC,eAAOsG,EAAEwE,YAHgB;AAIzBlG,gBAAQ,CACN,CAACmG,WAAWzE,EAAE0E,WAAF1E,CAAc,CAAdA,CAAXyE,CAAD,EAA+BA,WAAWzE,EAAE0E,WAAF1E,CAAc,CAAdA,CAAXyE,CAA/B,CADM,EAEN,CAACA,WAAWzE,EAAE0E,WAAF1E,CAAc,CAAdA,CAAXyE,CAAD,EAA+BA,WAAWzE,EAAE0E,WAAF1E,CAAc,CAAdA,CAAXyE,CAA/B,CAFM,CAJiB;AAQzBlD,aAAKvB;AARoB,OAAPA;AAQbA,KARP;AAQOA,GA7BoCuD,EA6BpCvD,CA7BoCuD;AA6BpCvD,CAzCUoE,CAA8BlF,CAA9BkF,CbRTzP;AAAAA,IcpBSgQ;AACnB,aAAY3J,CAAZ,EAAYA;AAAAA,8BAELA,CAFKA,EAELA;AACH+G,uDADG/G;AAEHqJ;AAFGrJ,KAFKA,MAIRqJ,IAJQrJ;AAIRqJ;;AAAAA;AAAAA,CALeM,CAA2BP,CAA3BO,CdoBThQ;AAAAA,Ie0DSiQ;AAArB;AAAA;AAAA,8DAIc,8CAJd,EAIc5O,CAJd;AAIc;;AAAA4L;AAAA;AAAA,WAEZnC,QAFY,GAEZ;AAAA,QAAW9I,WAAX;AAAA,QACQyI,IAA0B,mBAAVzI,CAAU,GAAW;AAAEkL,SAAGlL;AAAL,KAAX,GAA0BA,CAD5D;AAIE,WAFAyI,EAAOkF,MAAPlF,GAAgB,MAAhBA,EAAgB,KAEJG,MAFI,CAEGnK,KAAK2M,SAFR,EAEmB3C,CAFnB,CAEhB;AAAmCA,GANzB,EAMyBA,EAGrCU,KAHqCV,GAGrC,UAAM8B,CAAN,EAAMA;AACJ,WAAOA,EAASlF,IAATkF,CAAcrJ,OAAdqJ,CAAsB3E,GAAtB2E,CAA0B,UAAClB,CAAD,EAACA;AAAAA,aAAO;AACvCnC,WAAGmC,EAAEgD,QAAFhD,CAAWqB,GADyB;AAEvCzD,WAAGoC,EAAEgD,QAAFhD,CAAWsB,GAFyB;AAGvC5H,eAAOsG,EAAE6E,SAH8B;AAIvCvG,gBAAQ,CACN,CAAC0B,EAAE1B,MAAF0B,CAASgE,SAAThE,CAAmBsB,GAApB,EAAyBtB,EAAE1B,MAAF0B,CAASgE,SAAThE,CAAmBqB,GAA5C,CADM,EAEN,CAACrB,EAAE1B,MAAF0B,CAASiE,SAATjE,CAAmBsB,GAApB,EAAyBtB,EAAE1B,MAAF0B,CAASiE,SAATjE,CAAmBqB,GAA5C,CAFM,CAJ+B;AAQvCE,aAAKvB;AARkC,OAAPA;AAQ3BA,KARAkB,CAAP;AAQOlB,GAlBG,EAkBHA,EAIH/C,MAJG+C,GAIH/C,UAAOjC,CAAPiC,EAAOjC;AAAAA;AAEX,6BAAIA,EAAQrE,KAARqE,CAAcvC,MAAduC,GAAuB,CAAvBA,GACK,EADLA,GACK7B,YAGI8D,MAHJ,CAGIA,IAHJ,CAGIA,IAHJ,EAGWjC,CAHX,CADT;AAIoBA,KANTA,CAMSA;AAAAA;AAAAA;AAAAA,GA5BV,EA4BUA,CA5BV;AA4BUA,CAhCH4J,CAAyB1F,CAAzB0F,Cf1DTjQ;AAAAA,IgBDSmQ;AAMnB,aAAY9J,CAAZ,EAAYA;AAAAA;AAAAA,gCAAiC,EAAjCA,GAAiC,CAC3C/E,iBAAM+E,CAAN/E,KAAM+E,IADqC,EAItC+G,SAJsC,GAI1B/G,EAAQ+G,SAAR/G,IAAwBuI,sDAJ/BvI,EAI+BuI,CAJ/BvI;AAI+BuI;;AAAAA;AAAAA;AAAAA,WAG3C9D,QAH2C8D,GAG3C;AACE,gBAAYhE,MAAZ,CAAYA,KAAUnK,KAAK2M,SAAfxC,GAAewC,EADlBpL,KACG4I,GADH5I,OACT;AADSA,GAHgC4M,EAGhC5M,EAIXmJ,KAJWnJ,GAIX,UAAMuK,CAAN,EAAMA;AAKJ,YAJgB9M,MAAMC,OAAND,CAAc8M,EAASlF,IAATkF,CAAcuC,QAA5BrP,IACZ8M,EAASlF,IAATkF,CAAcuC,QADFrP,GAEZ,EAEJ,EAAemI,GAAf,CAAmB,UAACyD,CAAD,EAACA;AAClB,UAAI1B,IAAS,IAAb;AAQA,aAPI0B,EAAEsC,IAAFtC,KACF1B,IAAS,CACP,CAACmG,WAAWzE,EAAEsC,IAAFtC,CAAO,CAAPA,CAAXyE,CAAD,EAAwBA,WAAWzE,EAAEsC,IAAFtC,CAAO,CAAPA,CAAXyE,CAAxB,CADO,EAEP,CAACA,WAAWzE,EAAEsC,IAAFtC,CAAO,CAAPA,CAAXyE,CAAD,EAAwBA,WAAWzE,EAAEsC,IAAFtC,CAAO,CAAPA,CAAXyE,CAAxB,CAFO,CADPzE,GAOG;AACLnC,WAAGpG,OAAOuI,EAAE+E,MAAF/E,CAAS,CAATA,CAAPvI,CADE;AAELmG,WAAGnG,OAAOuI,EAAE+E,MAAF/E,CAAS,CAATA,CAAPvI,CAFE;AAGLiC,eAAOsG,EAAEgF,UAAFhF,GAAeA,EAAEgF,UAAjBhF,GAA8BA,EAAEnE,IAHlC;AAILyC,iBAJK;AAKLiD,aAAKvB;AALA,OAAP;AAKOA,KAdT;AAcSA,GA1BgCuD,EA0BhCvD,CA1BgCuD;AA0BhCvD,CApCQ8E,CAAuB5F,CAAvB4F,ChBCTnQ;AAAAA,IiBuBSsQ;AAOnB,aAAYjK,CAAZ,EAAYA;AAAAA;AAAAA,yBAAmC,EAAnCA;AAGV,QAAMuI,IAAO,kCAAb;AAAa,YAFbtN,iBAAM+E,CAAN/E,KAAM+E,IAEO,EACR+G,SADQ,GACI/G,EAAQ+G,SAAR/G,IAAwBuI,aAD5B,EAEbtN,EAAKoO,UAALpO,GAAkB+E,EAAQqJ,UAARrJ,IAAyBuI,cAF9B,EAE8BA,CAF9B;AAE8BA;;AAAAA;AAAAA;AAAAA,WAG7C9D,QAH6C8D,GAG7C;AAAA,QAAW5M,WAAX;AAAA,QACQyI,IAA0B,mBAAVzI,CAAU,GAAW;AAAEkL,SAAGlL;AAAL,KAAX,GAA0BA,CAD5D;;AAGE,cAHgB3D,IAGhB;AACE,WAAK2B,EAAY6O,OAAjB;AACE,oBAAYjE,MAAZ,CAAmBnK,KAAKiP,UAAxB,EAAoCjF,CAApC;;AAEF;AACE,oBAAYG,MAAZ,CAAmBnK,KAAK2M,SAAxB,EAAmC3C,CAAnC;AALJ;AAKuCA,GAXImE,EAWJnE,EAIzCU,KAJyCV,GAIzC,UAAMxH,CAAN,EAAMA;AACJ,WAAOA,EAAOoE,IAAPpE,CAAY6L,QAAZ7L,CAAqB2E,GAArB3E,CAAyB,UAACoI,CAAD,EAACA;AAAAA,aAAO;AACtCnC,WAAGmC,EAAEgD,QAAFhD,CAAWmC,WAAXnC,CAAuB,CAAvBA,CADmC;AAEtCpC,WAAGoC,EAAEgD,QAAFhD,CAAWmC,WAAXnC,CAAuB,CAAvBA,CAFmC;AAGtCtG,eAAOsG,EAAE2D,UAAF3D,CAAatG,KAHkB;AAItC4E,gBAAQ,IAJ8B;AAKtCiD,aAAKvB;AALiC,OAAPA;AAK1BA,KALApI,CAAP;AAKOoI,GArBoCuD,EAqBpCvD,CArBoCuD;AAqBpCvD,CAjCUiF,CAAyB/F,CAAzB+F,CjBvBTtQ;;AiBuBkCuK","names":["createElement","element","className","parent","attributes","el","document","Object","keys","forEach","key","type","indexOf","substr","toLowerCase","addEventListener","innerHTML","innerText","setAttribute","appendChild","stopPropagation","event","preventDefault","cx","classNames","filter","Boolean","join","trim","addClassName","classList","Array","isArray","name","contains","add","removeClassName","remove","RequestType","ENTER_KEY","ARROW_DOWN_KEY","ARROW_UP_KEY","SPECIAL_KEYS","SearchElement","handleSubmit","searchLabel","o","this","container","form","autocomplete","onClick","onDblClick","touchStart","touchEnd","input","placeholder","onInput","onKeyUp","e","_this","onKeyPress","onFocus","onBlur","focus","dispatchEvent","Event","onSubmit","_this3","Promise","query","value","hasError","keyCode","body","blur","setQuery","ResultList","handleClick","n","notFoundMessage","target","hasAttribute","idx","Number","getAttribute","clear","result","results","notfound","undefined","html","resultlist","resultItem","item","render","resultFormat","child","_this2","cloneNode","length","parentElement","select","index","from","children","selected","count","lastChild","removeChild","t","defaultOptions","position","style","showMarker","showPopup","popupFormat","label","marker","icon","L","Default","draggable","maxMarkers","maxSuggestions","retainZoomLevel","animateZoom","messageHideDelay","zoomLevel","button","resetButton","msgbox","autoComplete","autoCompleteDelay","autoClose","keepResult","updateMap","UNINITIALIZED_ERR","Control","options","initialize","cb","wait","immediate","timeout","Error","provider","markers","searchElement","title","href","disableClickPropagation","text","clearResults","resultList","data","autoSearch","args","clearTimeout","setTimeout","selectResult","onAdd","map","addTo","root","getContainer","querySelector","onRemove","max","next","force","clearLayers","search","slice","_this5","showResult","getLayers","removeLayer","addMarker","centerMap","fireEvent","location","closeResults","y","x","popupLabel","bindPopup","addLayer","openPopup","on","_this6","getLatLng","resultBounds","bounds","toBounds","isValid","getBounds","setView","getCenter","getZoom","animate","fitBounds","SearchControl","LControl","extend","AbstractProvider","getParamString","params","set","encodeURIComponent","getUrl","url","endpoint","SEARCH","fetch","request","json","parse","Provider","r","findBestMatchLevelIndex","vms","match","find","vm","matchLevel","getLabel","locale_names","_result$locale_names","_highlightResult","city","_result$city","administrative","postcode","_result$postcode","country","_result$country","response","hits","_geoloc","lng","lat","raw","method","JSON","stringify","BingProvider","l","q","jsonp","searchUrl","resourceSets","resources","point","coordinates","address","formattedAddress","bbox","script","Date","now","resolve","window","EsriProvider","f","locations","feature","geometry","extent","ymin","xmin","ymax","xmax","PeliasProvider","host","REVERSE","features","res","properties","GeocodeEarthProvider","GoogleProvider","formatted_address","viewport","southwest","northeast","HereProvider","items","OpenStreetMapProvider","reverseUrl","format","lon","display_name","parseFloat","boundingbox","LocationIQProvider","OpenCageProvider","formatted","MapBoxProvider","center","place_name","GeoApiFrProvider"],"sources":["../src/domUtils.ts","../src/providers/provider.ts","../src/constants.ts","../src/SearchElement.ts","../src/resultList.ts","../src/SearchControl.ts","../src/lib/debounce.ts","../src/providers/algoliaProvider.ts","../src/providers/bingProvider.ts","../src/providers/esriProvider.ts","../src/providers/peliasProvider.ts","../src/providers/geocodeEarthProvider.ts","../src/providers/googleProvider.ts","../src/providers/hereProvider.ts","../src/providers/openStreetMapProvider.ts","../src/providers/locationIQProvider.ts","../src/providers/openCageProvider.ts","../src/providers/mapBoxProvider.ts","../src/providers/geoApiFrProvider.ts"],"sourcesContent":["export function createElement<T extends HTMLElement = HTMLElement>(\n  element: string,\n  className: string | null = '',\n  parent?: Element | null,\n  attributes: { [key: string]: string | ((event: any) => void) } = {},\n): T {\n  const el = document.createElement(element) as T;\n\n  if (className) {\n    el.className = className;\n  }\n\n  Object.keys(attributes).forEach((key) => {\n    if (typeof attributes[key] === 'function') {\n      // IE doesn't support startsWith\n      const type = (key.indexOf('on') === 0\n        ? key.substr(2).toLowerCase()\n        : key) as keyof HTMLElementEventMap;\n      el.addEventListener(type, attributes[key] as () => void);\n    } else if (key === 'html') {\n      el.innerHTML = attributes[key] as string;\n    } else if (key === 'text') {\n      el.innerText = attributes[key] as string;\n    } else {\n      el.setAttribute(key, attributes[key] as string);\n    }\n  });\n\n  if (parent) {\n    parent.appendChild(el);\n  }\n\n  return el;\n}\n\nexport function stopPropagation(event: Event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nexport function createScriptElement<T = object>(\n  url: string,\n  cb: string,\n): Promise<T> {\n  const script = createElement('script', null, document.body);\n  script.setAttribute('type', 'text/javascript');\n\n  return new Promise((resolve) => {\n    (window as any)[cb] = (json: T): void => {\n      script.remove();\n      delete (window as any)[cb];\n      resolve(json);\n    };\n\n    script.setAttribute('src', url);\n  });\n}\n\nexport const cx = (...classNames: (string | undefined)[]): string =>\n  classNames.filter(Boolean).join(' ').trim();\n\nexport function addClassName(\n  element: Element | null,\n  className: string | string[],\n): void {\n  if (!element || !element.classList) {\n    return;\n  }\n\n  // IE doesn't support adding multiple classes at once :(\n  const classNames = Array.isArray(className) ? className : [className];\n  classNames.forEach((name) => {\n    if (!element.classList.contains(name)) {\n      element.classList.add(name);\n    }\n  });\n}\n\nexport function removeClassName(\n  element: Element | null,\n  className: string | string[],\n): void {\n  if (!element || !element.classList) {\n    return;\n  }\n\n  // IE doesn't support removing multiple classes at once :(\n  const classNames = Array.isArray(className) ? className : [className];\n  classNames.forEach((name) => {\n    if (element.classList.contains(name)) {\n      element.classList.remove(name);\n    }\n  });\n}\n\nexport function replaceClassName(\n  element: Element,\n  find: string,\n  replace: string,\n): void {\n  removeClassName(element, find);\n  addClassName(element, replace);\n}\n","export type PointTuple = [number, number];\nexport type BoundsTuple = [PointTuple, PointTuple];\n\nexport interface LatLng {\n  lat: number;\n  lng: number;\n}\n\nexport interface SearchResult<TRawResult = any> {\n  x: number;\n  y: number;\n  label: string;\n  bounds: BoundsTuple | null;\n  raw: TRawResult;\n}\n\nexport interface ProviderParams {\n  [key: string]: string | number | boolean;\n}\n\nexport interface ProviderOptions {\n  params?: ProviderParams;\n}\n\nexport enum RequestType {\n  SEARCH,\n  REVERSE,\n}\n\nexport interface EndpointArgument {\n  query: string | { [key: string]: string | number | boolean };\n  type?: RequestType;\n}\n\nexport interface SearchArgument {\n  query: string;\n}\n\nexport interface ParseArgument<TData> {\n  data: TData;\n}\n\nexport interface Provider<TRequestResult, TRawResult> {\n  options: ProviderOptions;\n\n  endpoint(options: EndpointArgument): string;\n  getParamString(params: ProviderParams): string;\n  parse(response: ParseArgument<TRequestResult>): SearchResult<TRawResult>[];\n  search(options: SearchArgument): Promise<SearchResult<TRawResult>[]>;\n}\n\nexport default abstract class AbstractProvider<\n  TRequestResult = any,\n  TRawResult = any\n> implements Provider<TRequestResult, TRawResult> {\n  options: ProviderOptions;\n\n  constructor(options: ProviderOptions = {}) {\n    this.options = options;\n  }\n\n  abstract endpoint(options: EndpointArgument): string;\n  abstract parse(\n    response: ParseArgument<TRequestResult>,\n  ): SearchResult<TRawResult>[];\n\n  getParamString(params: ProviderParams = {}): string {\n    const set = { ...this.options.params, ...params };\n    return Object.keys(set)\n      .map(\n        (key) => `${encodeURIComponent(key)}=${encodeURIComponent(set[key])}`,\n      )\n      .join('&');\n  }\n\n  getUrl(url: string, params?: ProviderParams): string {\n    return `${url}?${this.getParamString(params)}`;\n  }\n\n  async search(options: SearchArgument): Promise<SearchResult<TRawResult>[]> {\n    const url = this.endpoint({\n      query: options.query,\n      type: RequestType.SEARCH,\n    });\n\n    const request = await fetch(url);\n    const json: TRequestResult = await request.json();\n    return this.parse({ data: json });\n  }\n}\n","export const ENTER_KEY = 13;\nexport const ESCAPE_KEY = 27;\nexport const ARROW_DOWN_KEY = 40;\nexport const ARROW_UP_KEY = 38;\nexport const ARROW_LEFT_KEY = 37;\nexport const ARROW_RIGHT_KEY = 39;\n\nexport const SPECIAL_KEYS = [\n  ENTER_KEY,\n  ESCAPE_KEY,\n  ARROW_DOWN_KEY,\n  ARROW_UP_KEY,\n  ARROW_LEFT_KEY,\n  ARROW_RIGHT_KEY,\n];\n","import {\n  createElement,\n  addClassName,\n  removeClassName,\n  cx,\n  stopPropagation,\n  replaceClassName,\n} from './domUtils';\n\nimport { ESCAPE_KEY, ENTER_KEY } from './constants';\n\ninterface SearchElementProps {\n  searchLabel?: string;\n  handleSubmit: (args: { query: string }) => void;\n  classNames?: {\n    container?: string;\n    form?: string;\n    input?: string;\n  };\n}\n\nexport default class SearchElement {\n  container: HTMLDivElement;\n  form: HTMLFormElement;\n  input: HTMLInputElement;\n  handleSubmit: (args: { query: string }) => void;\n  hasError = false;\n\n  constructor({\n    handleSubmit,\n    searchLabel,\n    classNames = {},\n  }: SearchElementProps) {\n    this.container = createElement<HTMLDivElement>(\n      'div',\n      cx('geosearch', classNames.container),\n    );\n\n    this.form = createElement<HTMLFormElement>(\n      'form',\n      ['', classNames.form].join(' '),\n      this.container,\n      {\n        autocomplete: 'none',\n        onClick: stopPropagation,\n        onDblClick: stopPropagation,\n        touchStart: stopPropagation,\n        touchEnd: stopPropagation,\n      },\n    );\n\n    this.input = createElement<HTMLInputElement>(\n      'input',\n      ['glass', classNames.input].join(' '),\n      this.form,\n      {\n        type: 'text',\n        placeholder: searchLabel || 'search',\n        onInput: this.onInput,\n        onKeyUp: (e) => this.onKeyUp(e),\n        onKeyPress: (e) => this.onKeyPress(e),\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n\n        // For some reason, leaflet is blocking the 'touchstart', manually give\n        // focus to the input onClick\n        // > Ignored attempt to cancel a touchstart event with cancelable=false,\n        // > for example because scrolling is in progress and cannot be interrupted.\n        onClick: () => {\n          this.input.focus();\n          this.input.dispatchEvent(new Event('focus'));\n        },\n      },\n    );\n\n    this.handleSubmit = handleSubmit;\n  }\n\n  onFocus(): void {\n    addClassName(this.form, 'active');\n  }\n\n  onBlur(): void {\n    removeClassName(this.form, 'active');\n  }\n\n  async onSubmit(event: Event): Promise<void> {\n    stopPropagation(event);\n    replaceClassName(this.container, 'error', 'pending');\n\n    await this.handleSubmit({ query: this.input.value });\n    removeClassName(this.container, 'pending');\n  }\n\n  onInput(): void {\n    if (!this.hasError) {\n      return;\n    }\n\n    removeClassName(this.container, 'error');\n    this.hasError = false;\n  }\n\n  onKeyUp(event: KeyboardEvent): void {\n    if (event.keyCode !== ESCAPE_KEY) {\n      return;\n    }\n\n    removeClassName(this.container, ['pending', 'active']);\n\n    this.input.value = '';\n\n    document.body.focus();\n    document.body.blur();\n  }\n\n  onKeyPress(event: KeyboardEvent): void {\n    if (event.keyCode !== ENTER_KEY) {\n      return;\n    }\n\n    this.onSubmit(event);\n  }\n\n  setQuery(query: string): void {\n    this.input.value = query;\n  }\n}\n","import { createElement, addClassName, removeClassName, cx } from './domUtils';\nimport { SearchResult } from './providers/provider';\n\ninterface ResultListProps {\n  handleClick: (args: { result: SearchResult }) => void;\n  classNames?: {\n    resultlist?: string;\n    item?: string;\n    notfound?: string;\n  };\n  notFoundMessage?: string;\n}\n\nexport default class ResultList {\n  handleClick?: (args: { result: SearchResult }) => void;\n  selected = -1;\n  results: SearchResult[] = [];\n\n  container: HTMLDivElement;\n  resultItem: HTMLDivElement;\n  notFoundMessage?: HTMLDivElement;\n\n  constructor({\n    handleClick,\n    classNames = {},\n    notFoundMessage,\n  }: ResultListProps) {\n    this.handleClick = handleClick;\n    this.notFoundMessage = !!notFoundMessage\n      ? createElement<HTMLDivElement>(\n          'div',\n          cx(classNames.notfound),\n          undefined,\n          { html: notFoundMessage! },\n        )\n      : undefined;\n\n    this.container = createElement<HTMLDivElement>(\n      'div',\n      cx('results', classNames.resultlist),\n    );\n    this.container.addEventListener('click', this.onClick, true);\n\n    this.resultItem = createElement<HTMLDivElement>('div', cx(classNames.item));\n  }\n\n  render(results: SearchResult[] = [], resultFormat: Function): void {\n    this.clear();\n\n    results.forEach((result, idx) => {\n      const child = this.resultItem.cloneNode(true) as HTMLDivElement;\n      child.setAttribute('data-key', `${idx}`);\n      child.innerHTML = resultFormat({ result });\n      this.container.appendChild(child);\n    });\n\n    if (results.length > 0) {\n      addClassName(this.container.parentElement, 'open');\n      addClassName(this.container, 'active');\n    } else if (!!this.notFoundMessage) {\n      this.container.appendChild(this.notFoundMessage);\n      addClassName(this.container.parentElement, 'open');\n    }\n\n    this.results = results;\n  }\n\n  select(index: number): SearchResult {\n    // eslint-disable-next-line no-confusing-arrow\n    Array.from(this.container.children).forEach((child, idx) =>\n      idx === index\n        ? addClassName(child, 'active')\n        : removeClassName(child, 'active'),\n    );\n\n    this.selected = index;\n    return this.results[index];\n  }\n\n  count(): number {\n    return this.results ? this.results.length : 0;\n  }\n\n  clear(): void {\n    this.selected = -1;\n\n    while (this.container.lastChild) {\n      this.container.removeChild(this.container.lastChild);\n    }\n\n    removeClassName(this.container.parentElement, 'open');\n    removeClassName(this.container, 'active');\n  }\n\n  onClick = (event: Event): void => {\n    if (typeof this.handleClick !== 'function') {\n      return;\n    }\n\n    const target = event.target as HTMLDivElement;\n    if (\n      !target ||\n      !this.container.contains(target) ||\n      !target.hasAttribute('data-key')\n    ) {\n      return;\n    }\n\n    const idx = Number(target.getAttribute('data-key'));\n    this.clear();\n    this.handleClick({ result: this.results[idx] });\n  };\n}\n","import * as L from 'leaflet';\nimport { ControlPosition, FeatureGroup, MarkerOptions, Map } from 'leaflet';\nimport SearchElement from './SearchElement';\nimport ResultList from './resultList';\nimport debounce from './lib/debounce';\n\nimport {\n  createElement,\n  addClassName,\n  removeClassName,\n  stopPropagation,\n} from './domUtils';\nimport {\n  ENTER_KEY,\n  SPECIAL_KEYS,\n  ARROW_UP_KEY,\n  ARROW_DOWN_KEY,\n  ESCAPE_KEY,\n} from './constants';\nimport AbstractProvider, { SearchResult } from './providers/provider';\nimport { Provider } from './providers';\n\nconst defaultOptions: Omit<SearchControlProps, 'provider'> = {\n  position: 'topleft',\n  style: 'button',\n  showMarker: true,\n  showPopup: false,\n  popupFormat: ({ result }) => `${result.label}`,\n  resultFormat: ({ result }) => `${result.label}`,\n  marker: {\n    icon: L && L.Icon ? new L.Icon.Default() : undefined,\n    draggable: false,\n  },\n  maxMarkers: 1,\n  maxSuggestions: 5,\n  retainZoomLevel: false,\n  animateZoom: true,\n  searchLabel: 'Enter address',\n  notFoundMessage: '',\n  messageHideDelay: 3000,\n  zoomLevel: 18,\n  classNames: {\n    container: 'leaflet-bar leaflet-control leaflet-control-geosearch',\n    button: 'leaflet-bar-part leaflet-bar-part-single',\n    resetButton: 'reset',\n    msgbox: 'leaflet-bar message',\n    form: '',\n    input: '',\n    resultlist: '',\n    item: '',\n    notfound: 'leaflet-bar-notfound',\n  },\n  autoComplete: true,\n  autoCompleteDelay: 250,\n  autoClose: false,\n  keepResult: false,\n  updateMap: true,\n};\n\nconst UNINITIALIZED_ERR =\n  'Leaflet must be loaded before instantiating the GeoSearch control';\n\ninterface SearchControlProps {\n  /** the provider to use for searching */\n  provider: Provider;\n  /** the leaflet position to render the element in */\n  position: ControlPosition;\n  /**\n   * the stye of the search element\n   * @default bar\n   **/\n  style: 'button' | 'bar';\n\n  marker: MarkerOptions;\n  maxMarkers: number;\n  showMarker: boolean;\n  showPopup: boolean;\n  popupFormat<T = any>(args: {\n    query: Selection;\n    result: SearchResult<T>;\n  }): string;\n\n  resultFormat<T = any>(args: { result: SearchResult<T> }): string;\n\n  searchLabel: string;\n  notFoundMessage: string;\n  messageHideDelay: number;\n\n  animateZoom: boolean;\n  zoomLevel: number;\n  retainZoomLevel: boolean;\n\n  classNames: {\n    container: string;\n    button: string;\n    resetButton: string;\n    msgbox: string;\n    form: string;\n    input: string;\n    resultlist: string;\n    item: string;\n    notfound: string;\n  };\n\n  autoComplete: boolean;\n  autoCompleteDelay: number;\n  maxSuggestions: number;\n  autoClose: boolean;\n  keepResult: boolean;\n  updateMap: boolean;\n}\n\nexport type SearchControlOptions = Partial<SearchControlProps> & {\n  provider: Provider;\n};\n\ninterface Selection {\n  query: string;\n  data?: SearchResult;\n}\n\ninterface SearchControl {\n  options: Omit<SearchControlProps, 'provider'> & {\n    provider?: SearchControlProps['provider'];\n  };\n  markers: FeatureGroup;\n  searchElement: SearchElement;\n  resultList: ResultList;\n  classNames: SearchControlProps['classNames'];\n  container: HTMLDivElement;\n  input: HTMLInputElement;\n  button: HTMLAnchorElement;\n  resetButton: HTMLAnchorElement;\n  map: Map;\n\n  // [key: string]: any;\n  initialize(options: SearchControlProps): void;\n  onSubmit(result: Selection): void;\n  onClick(event: Event): void;\n  clearResults(event?: KeyboardEvent | null, force?: boolean): void;\n  autoSearch(event: KeyboardEvent): void;\n  selectResult(event: KeyboardEvent): void;\n  showResult(result: SearchResult, query: Selection): void;\n  addMarker(result: SearchResult, selection: Selection): void;\n  centerMap(result: SearchResult): void;\n  closeResults(): void;\n  getZoom(): number;\n  onAdd(map: Map): HTMLDivElement;\n  onRemove(): SearchControl;\n}\n\n// @ts-ignore\nconst Control: SearchControl = {\n  options: { ...defaultOptions },\n  classNames: { ...defaultOptions.classNames },\n\n  initialize(options: SearchControlOptions) {\n    if (!L) {\n      throw new Error(UNINITIALIZED_ERR);\n    }\n\n    if (!options.provider) {\n      throw new Error('Provider is missing from options');\n    }\n\n    // merge given options with control defaults\n    this.options = { ...this.options, ...options };\n    this.classNames = { ...this.classNames, ...options.classNames };\n\n    this.markers = new L.FeatureGroup();\n    this.classNames.container += ` leaflet-geosearch-${this.options.style}`;\n\n    this.searchElement = new SearchElement({\n      searchLabel: this.options.searchLabel,\n      classNames: {\n        container: this.classNames.container,\n        form: this.classNames.form,\n        input: this.classNames.input,\n      },\n      handleSubmit: (result) => this.onSubmit(result),\n    });\n\n    this.button = createElement<HTMLAnchorElement>(\n      'a',\n      this.classNames.button,\n      this.searchElement.container,\n      {\n        title: this.options.searchLabel,\n        href: '#',\n        onClick: (e) => this.onClick(e),\n      },\n    );\n\n    L.DomEvent.disableClickPropagation(this.button);\n\n    this.resetButton = createElement<HTMLAnchorElement>(\n      'a',\n      this.classNames.resetButton,\n      this.searchElement.form,\n      {\n        text: 'Ã—',\n        href: '#',\n        onClick: () => this.clearResults(null, true),\n      },\n    );\n\n    L.DomEvent.disableClickPropagation(this.resetButton);\n\n    if (this.options.autoComplete) {\n      this.resultList = new ResultList({\n        handleClick: ({ result }): void => {\n          this.searchElement.input.value = result.label;\n          this.onSubmit({ query: result.label, data: result });\n        },\n        classNames: {\n          resultlist: this.classNames.resultlist,\n          item: this.classNames.item,\n          notfound: this.classNames.notfound,\n        },\n        notFoundMessage: this.options.notFoundMessage,\n      });\n\n      this.searchElement.form.appendChild(this.resultList.container);\n\n      this.searchElement.input.addEventListener(\n        'keyup',\n        debounce(\n          (e: KeyboardEvent) => this.autoSearch(e),\n          this.options.autoCompleteDelay,\n        ),\n        true,\n      );\n\n      this.searchElement.input.addEventListener(\n        'keydown',\n        (e: KeyboardEvent) => this.selectResult(e),\n        true,\n      );\n\n      this.searchElement.input.addEventListener(\n        'keydown',\n        (e: KeyboardEvent) => this.clearResults(e, true),\n        true,\n      );\n    }\n\n    this.searchElement.form.addEventListener(\n      'click',\n      (e) => {\n        e.preventDefault();\n      },\n      false,\n    );\n  },\n\n  onAdd(map: Map) {\n    const { showMarker, style } = this.options;\n\n    this.map = map;\n    if (showMarker) {\n      this.markers.addTo(map);\n    }\n\n    if (style === 'bar') {\n      const root = map\n        .getContainer()\n        .querySelector('.leaflet-control-container');\n\n      this.container = createElement<HTMLDivElement>(\n        'div',\n        'leaflet-control-geosearch leaflet-geosearch-bar',\n      );\n\n      this.container.appendChild(this.searchElement.form);\n      root!.appendChild(this.container);\n    }\n\n    L.DomEvent.disableClickPropagation(this.searchElement.form);\n    return this.searchElement.container;\n  },\n\n  onRemove() {\n    this.container?.remove();\n    return this;\n  },\n\n  onClick(event: Event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const { container, input } = this.searchElement;\n\n    if (container.classList.contains('active')) {\n      removeClassName(container, 'active');\n      this.clearResults();\n    } else {\n      addClassName(container, 'active');\n      input.focus();\n    }\n  },\n\n  selectResult(event) {\n    if (\n      [ENTER_KEY, ARROW_DOWN_KEY, ARROW_UP_KEY].indexOf(event.keyCode) === -1\n    ) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (event.keyCode === ENTER_KEY) {\n      const item = this.resultList.select(this.resultList.selected);\n      this.onSubmit({ query: this.searchElement.input.value, data: item });\n      return;\n    }\n\n    const max = this.resultList.count() - 1;\n    if (max < 0) {\n      return;\n    }\n\n    const { selected } = this.resultList;\n    const next = event.keyCode === ARROW_DOWN_KEY ? selected + 1 : selected - 1;\n    const idx = next < 0 ? max : next > max ? 0 : next;\n\n    const item = this.resultList.select(idx);\n    this.searchElement.input.value = item.label;\n  },\n\n  clearResults(event: KeyboardEvent | null, force = false) {\n    if (event && event.keyCode !== ESCAPE_KEY) {\n      return;\n    }\n\n    const { keepResult, autoComplete } = this.options;\n\n    if (force || !keepResult) {\n      this.searchElement.input.value = '';\n      this.markers.clearLayers();\n    }\n\n    if (autoComplete) {\n      this.resultList.clear();\n    }\n  },\n\n  async autoSearch(event) {\n    if (SPECIAL_KEYS.indexOf(event.keyCode) > -1) {\n      return;\n    }\n\n    const query = (event.target as HTMLInputElement).value;\n    const { provider } = this.options;\n\n    if (query.length) {\n      let results = await provider!.search({ query });\n      results = results.slice(0, this.options.maxSuggestions);\n      this.resultList.render(results, this.options.resultFormat);\n    } else {\n      this.resultList.clear();\n    }\n  },\n\n  async onSubmit(query) {\n    const { provider } = this.options;\n\n    const results = await provider!.search(query);\n\n    if (results && results.length > 0) {\n      this.showResult(results[0], query);\n    }\n  },\n\n  showResult(result, query) {\n    const { autoClose, updateMap } = this.options;\n\n    const markers = this.markers.getLayers();\n    if (markers.length >= this.options.maxMarkers) {\n      this.markers.removeLayer(markers[0]);\n    }\n\n    const marker = this.addMarker(result, query);\n\n    if (updateMap) {\n      this.centerMap(result);\n    }\n\n    this.map.fireEvent('geosearch/showlocation', {\n      location: result,\n      marker,\n    });\n\n    if (autoClose) {\n      this.closeResults();\n    }\n  },\n\n  closeResults() {\n    const { container } = this.searchElement;\n\n    if (container.classList.contains('active')) {\n      removeClassName(container, 'active');\n    }\n\n    this.clearResults();\n  },\n\n  addMarker(result, query) {\n    const { marker: options, showPopup, popupFormat } = this.options;\n    const marker = new L.Marker([result.y, result.x], options);\n    let popupLabel = result.label;\n\n    if (typeof popupFormat === 'function') {\n      popupLabel = popupFormat({ query, result });\n    }\n\n    marker.bindPopup(popupLabel);\n\n    this.markers.addLayer(marker);\n\n    if (showPopup) {\n      marker.openPopup();\n    }\n\n    if (options.draggable) {\n      marker.on('dragend', (args) => {\n        this.map.fireEvent('geosearch/marker/dragend', {\n          location: marker.getLatLng(),\n          event: args,\n        });\n      });\n    }\n\n    return marker;\n  },\n\n  centerMap(result) {\n    const { retainZoomLevel, animateZoom } = this.options;\n\n    const resultBounds = result.bounds\n      ? new L.LatLngBounds(result.bounds)\n      : new L.LatLng(result.y, result.x).toBounds(10);\n\n    const bounds = resultBounds.isValid()\n      ? resultBounds\n      : this.markers.getBounds();\n\n    if (!retainZoomLevel && resultBounds.isValid() && !result.bounds) {\n      this.map.setView(bounds.getCenter(), this.getZoom(), {\n        animate: animateZoom,\n      });\n    } else if (!retainZoomLevel && resultBounds.isValid()) {\n      this.map.fitBounds(bounds, { animate: animateZoom });\n    } else {\n      this.map.setView(bounds.getCenter(), this.getZoom(), {\n        animate: animateZoom,\n      });\n    }\n  },\n\n  getZoom(): number {\n    const { retainZoomLevel, zoomLevel } = this.options;\n    return retainZoomLevel ? this.map.getZoom() : zoomLevel;\n  },\n};\n\nexport default function SearchControl(...options: any[]) {\n  if (!L) {\n    throw new Error(UNINITIALIZED_ERR);\n  }\n\n  const LControl = L.Control.extend(Control);\n  return new LControl(...options);\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nexport default function debounce(\n  cb: (...args: any[]) => void,\n  wait = 250,\n  immediate = false,\n): (...args: any[]) => void {\n  let timeout: ReturnType<typeof setTimeout> | null;\n\n  return (...args: any[]): void => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n\n    timeout = setTimeout(() => {\n      timeout = null;\n\n      if (!immediate) {\n        cb(...args);\n      }\n    }, wait);\n\n    if (immediate && !timeout) {\n      cb(...args);\n    }\n  };\n}\n","import AbstractProvider, {\n  LatLng,\n  ParseArgument,\n  SearchArgument,\n  SearchResult,\n} from './provider';\n\ninterface RequestResult {\n  hits: RawResult[];\n}\n\ninterface ValueMatch {\n  value: string;\n  matchLevel: string;\n  matchedWords: string[];\n  fullyHighlighted?: boolean;\n}\n\ninterface RawResult {\n  country: { [key: string]: string };\n  country_code: string;\n  city: { [key: string]: string[] };\n  importance: number;\n  _tags: string[];\n  postcode: string[];\n  population: number;\n  is_country: boolean;\n  is_highway: boolean;\n  is_city: boolean;\n  is_popular: boolean;\n  administrative: string[];\n  admin_level: number;\n  is_suburb: boolean;\n  locale_names: {\n    default: string[];\n  };\n  _geoloc: LatLng;\n  objectID: string;\n  _highlightResult: {\n    country: {\n      default: ValueMatch;\n      [key: string]: ValueMatch;\n    };\n    city: {\n      default: ValueMatch[];\n      [key: string]: ValueMatch[];\n    };\n    postcode: ValueMatch[];\n    administrative: ValueMatch[];\n    locale_names: {\n      default: ValueMatch[];\n    };\n  };\n}\n\ninterface ProviderOptions {\n  key?: string;\n  [key: string]: string | boolean | number | undefined;\n}\n\nexport default class Provider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  endpoint(): string {\n    // No query, Algolia requires POST request\n    return 'https://places-dsn.algolia.net/1/places/query';\n  }\n\n  /**\n   * Find index of value with best match\n   * (full, fallback to partial, and then to 0)\n   */\n  findBestMatchLevelIndex(vms: ValueMatch[]): number {\n    const match =\n      vms.find((vm) => vm.matchLevel === 'full') ||\n      vms.find((vm) => vm.matchLevel === 'partial');\n    return match ? vms.indexOf(match) : 0;\n  }\n\n  /**\n   * Algolia not provides labels for hits, so\n   * we will implement that builder ourselves\n   */\n  getLabel(result: RawResult): string {\n    return [\n      // Building + Street\n      result.locale_names?.default[\n        this.findBestMatchLevelIndex(\n          result._highlightResult.locale_names.default,\n        )\n      ],\n      // City\n      result.city?.default[\n        this.findBestMatchLevelIndex(result._highlightResult.city.default)\n      ],\n      // Administrative (State / Province)\n      result.administrative[\n        this.findBestMatchLevelIndex(result._highlightResult.administrative)\n      ],\n      // Zip code / Postal code\n      result.postcode?.[\n        this.findBestMatchLevelIndex(result._highlightResult.postcode)\n      ],\n      // Country\n      result.country?.default,\n    ]\n      .filter(Boolean)\n      .join(', ');\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.hits.map((r) => ({\n      x: r._geoloc.lng,\n      y: r._geoloc.lat,\n      label: this.getLabel(r),\n      bounds: null, // Algolia API does not provide bounds\n      raw: r,\n    }));\n  }\n\n  async search({ query }: SearchArgument): Promise<SearchResult<RawResult>[]> {\n    const params = typeof query === 'string' ? { query } : query;\n\n    const request = await fetch(this.endpoint(), {\n      method: 'POST',\n      body: JSON.stringify({\n        ...this.options.params,\n        ...params,\n      }),\n    });\n\n    const json = await request.json();\n    return this.parse({ data: json });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  SearchArgument,\n  SearchResult,\n} from './provider';\nimport { createScriptElement } from '../domUtils';\n\nexport interface RequestResult {\n  authenticationResultCode: string;\n  brandLogoUri: string;\n  copyright: string;\n  resourceSets: {\n    estimatedTotal: number;\n    resources: RawResult[];\n  }[];\n  statusCode: number;\n  statusDescription: string;\n  traceId: string;\n}\n\nexport interface RawResult {\n  __type: string;\n  bbox: [number, number, number, number];\n  name: string;\n  point: { type: 'Point'; coordinates: [number, number] };\n  address: {\n    adminDistrict: string;\n    adminDistrict2: string;\n    countryRegion: string;\n    formattedAddress: string;\n    locality: string;\n  };\n  confidence: string;\n  entityType: string;\n  geocodePoints: [\n    {\n      type: 'Point';\n      coordinates: [number, number];\n      calculationMethod: string;\n      usageTypes: string[];\n    },\n  ];\n  matchCodes: string[];\n}\n\nexport default class BingProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://dev.virtualearth.net/REST/v1/Locations';\n\n  endpoint({ query, jsonp }: EndpointArgument & { jsonp: string }): string {\n    const params = typeof query === 'string' ? { q: query } : query;\n    params.jsonp = jsonp;\n\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    if (response.data.resourceSets.length === 0) {\n      return [];\n    }\n\n    return response.data.resourceSets[0].resources.map((r) => ({\n      x: r.point.coordinates[1],\n      y: r.point.coordinates[0],\n      label: r.address.formattedAddress,\n      bounds: [\n        [r.bbox[0], r.bbox[1]], // s, w\n        [r.bbox[2], r.bbox[3]], // n, e\n      ],\n      raw: r,\n    }));\n  }\n\n  async search({ query }: SearchArgument): Promise<SearchResult<RawResult>[]> {\n    const jsonp = `BING_JSONP_CB_${Date.now()}`;\n    const json = await createScriptElement<RequestResult>(\n      this.endpoint({ query, jsonp }),\n      jsonp,\n    );\n\n    return this.parse({ data: json });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  SearchResult,\n} from './provider';\n\ninterface RequestResult {\n  spatialReference: { wkid: number; latestWkid: number };\n  locations: RawResult[];\n}\n\ninterface RawResult {\n  name: string;\n  extent: {\n    xmin: number;\n    ymin: number;\n    xmax: number;\n    ymax: number;\n  };\n  feature: {\n    geometry: { x: number; y: number };\n    attributes: { Score: number; Addr_Type: string };\n  };\n}\n\nexport default class EsriProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl =\n    'https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find';\n\n  endpoint({ query }: EndpointArgument): string {\n    const params = typeof query === 'string' ? { text: query } : query;\n    params.f = 'json';\n\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(result: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return result.data.locations.map((r) => ({\n      x: r.feature.geometry.x,\n      y: r.feature.geometry.y,\n      label: r.name,\n      bounds: [\n        [r.extent.ymin, r.extent.xmin], // s, w\n        [r.extent.ymax, r.extent.xmax], // n, e\n      ],\n      raw: r,\n    }));\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  ProviderOptions,\n  RequestType,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  geocoding: object;\n  features: RawResult[];\n}\n\nexport type PeliasProviderOptions = {\n  host?: string;\n} & ProviderOptions;\n\nexport interface RawResult {\n  type: 'Feature';\n  geometry: {\n    type: 'Point';\n    coordinates: [number, number];\n  };\n  bbox?: [number, number, number, number];\n  properties: {\n    id: string;\n    source_id: string;\n    gid: string;\n\n    layer: string;\n    source: string;\n\n    label: string;\n    name: string;\n\n    accuracy: 'centroid' | 'point';\n    confidence?: number;\n    match_type?: 'exact' | 'interpolated' | 'fallback';\n\n    borough?: string;\n    borough_a?: string;\n    borough_gid?: string;\n    continent?: string;\n    continent_a?: string;\n    continent_gid?: string;\n    country?: string;\n    country_a?: string;\n    country_gid?: string;\n    county?: string;\n    county_a?: string;\n    county_gid?: string;\n    dependency?: string;\n    dependency_a?: string;\n    dependency_gid?: string;\n    empire?: string;\n    empire_a?: string;\n    empire_gid?: string;\n    localadmin?: string;\n    localadmin_a?: string;\n    localadmin_gid?: string;\n    locality?: string;\n    locality_a?: string;\n    locality_gid?: string;\n    macrocounty?: string;\n    macrocounty_a?: string;\n    macrocounty_gid?: string;\n    macroregion?: string;\n    macroregion_a?: string;\n    macroregion_gid?: string;\n    marinearea?: string;\n    marinearea_a?: string;\n    marinearea_gid?: string;\n    neighbourhood?: string;\n    neighbourhood_a?: string;\n    neighbourhood_gid?: string;\n    ocean?: string;\n    ocean_a?: string;\n    ocean_gid?: string;\n    postalcode?: string;\n    postalcode_a?: string;\n    postalcode_gid?: string;\n    region?: string;\n    region_a?: string;\n    region_gid?: string;\n\n    street?: string;\n    housenumber?: string;\n\n    addendum?: any;\n  };\n}\n\nexport default class PeliasProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  // Pelias servers are self-hosted so you'll need to configure the 'options.host' string\n  // to identify where requests to your running pelias/api server instance should be sent.\n  // note: you SHOULD include the scheme, domain and port but NOT any path or parameters.\n  // If you're using the Docker setup (https://github.com/pelias/docker)\n  // then the default host of 'http://localhost:4000' will work out of the box.\n  host: string;\n\n  constructor(options: PeliasProviderOptions = {}) {\n    super(options);\n    this.host = options.host || 'http://localhost:4000';\n  }\n\n  /**\n   * note: Pelias has four different query modes:\n   * /v1/autocomplete: for partially completed inputs (such as when a user types)\n   * /v1/search: for completed inputs (such as when geocoding a CSV file)\n   * /v1/search/structured: for completed inputs with fields already separated\n   * /v1/reverse: for finding places nearby/enveloping a point\n   */\n  endpoint({ query, type }: EndpointArgument) {\n    switch (type) {\n      // case RequestType.AUTOCOMPLETE:\n      //   const autocompleteParams = (typeof query === 'string') ? { text: query } : query;\n      //   return this.getUrl(`${this.host}/v1/autocomplete`, autocompleteParams);\n\n      // case RequestType.FULLTEXT:\n      //   const searchParams = (typeof query === 'string') ? { text: query } : query;\n      //   return this.getUrl(`${this.host}/v1/search`, searchParams);\n\n      // case RequestType.STRUCTURED:\n      //   const structuredParams = (typeof query === 'string') ? { address: query } : query;\n      //   return this.getUrl(`${this.host}/v1/search/structured`, structuredParams);\n\n      case RequestType.REVERSE:\n        const reverseParams = typeof query === 'string' ? {} : query;\n        return this.getUrl(`${this.host}/v1/reverse`, reverseParams);\n\n      // note: the default query mode is set to 'autocomplete'\n      default:\n        const autocompleteParams =\n          typeof query === 'string' ? { text: query } : query;\n        return this.getUrl(`${this.host}/v1/autocomplete`, autocompleteParams);\n    }\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.features.map((feature) => {\n      const res: SearchResult<RawResult> = {\n        x: feature.geometry.coordinates[0],\n        y: feature.geometry.coordinates[1],\n        label: feature.properties.label,\n        bounds: null,\n        raw: feature,\n      };\n\n      // bbox values are only available for features derived from non-point geometries\n      // geojson bbox format: [minX, minY, maxX, maxY]\n      if (Array.isArray(feature.bbox) && feature.bbox.length === 4) {\n        res.bounds = [\n          [feature.bbox[1], feature.bbox[0]], // s, w\n          [feature.bbox[3], feature.bbox[2]], // n, e\n        ];\n      }\n\n      return res;\n    });\n  }\n}\n","import PeliasProvider, { PeliasProviderOptions } from './peliasProvider';\n\nexport default class GeocodeEarthProvider extends PeliasProvider {\n  constructor(options: PeliasProviderOptions = {}) {\n    options.host = 'https://api.geocode.earth';\n    super(options);\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  LatLng,\n  ParseArgument,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  results: RawResult[];\n  status: string;\n}\n\nexport interface RawResult {\n  address_components: {\n    long_name: string;\n    short_name: string;\n    types: string[];\n  }[];\n  formatted_address: string;\n  geometry: {\n    location: LatLng;\n    location_type: string;\n    viewport: {\n      northeast: LatLng;\n      southwest: LatLng;\n    };\n  };\n  place_id: string;\n  plus_code: {\n    compound_code: string;\n    global_code: string;\n  };\n  types: string[];\n}\n\nexport default class GoogleProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://maps.googleapis.com/maps/api/geocode/json';\n\n  endpoint({ query }: EndpointArgument) {\n    const params = typeof query === 'string' ? { address: query } : query;\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(result: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return result.data.results.map((r) => ({\n      x: r.geometry.location.lng,\n      y: r.geometry.location.lat,\n      label: r.formatted_address,\n      bounds: [\n        [r.geometry.viewport.southwest.lat, r.geometry.viewport.southwest.lng], // s, w\n        [r.geometry.viewport.northeast.lat, r.geometry.viewport.northeast.lng], // n, e\n      ],\n      raw: r,\n    }));\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  LatLng,\n  ParseArgument,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  items: RawResult[];\n}\n\nexport interface RawResult {\n  title: string;\n  id: string;\n  resultType: string;\n  address: {\n    label: string;\n    countryCode: string;\n    countryName: string;\n    state: string;\n    county: string;\n    city: string;\n    district: string;\n    street: string;\n    postalCode: string;\n    houseNumber: string;\n  };\n  position: LatLng;\n  access: LatLng[];\n  categories: { id: string }[];\n  contacts: { [key: string]: { value: string }[] }[];\n  scoring: {\n    queryScore: number;\n    fieldScore: {\n      placeName: number;\n    };\n  };\n}\n\nexport default class HereProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://geocode.search.hereapi.com/v1/geocode';\n\n  endpoint({ query }: EndpointArgument): string {\n    const params = typeof query === 'string' ? { q: query } : query;\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.items.map((r) => ({\n      x: r.position.lng,\n      y: r.position.lat,\n      label: r.address.label,\n      bounds: null,\n      raw: r,\n    }));\n  }\n}\n","/* eslint-disable @typescript-eslint/camelcase */\nimport AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  ProviderOptions,\n  RequestType,\n  SearchResult,\n} from './provider';\nimport hasShape from '../lib/hasShape';\n\nexport type RequestResult = RawResult[];\n\nexport interface RawResult {\n  place_id: string;\n  license: string;\n  osm_type: string;\n  osm_id: number;\n  boundingbox: [string, string, string, string];\n  lat: string;\n  lon: string;\n  display_name: string;\n  class: string;\n  type: string;\n  importance: number;\n  icon?: string;\n}\n\nexport type OpenStreetMapProviderOptions = {\n  searchUrl?: string;\n  reverseUrl?: string;\n} & ProviderOptions;\n\nexport default class OpenStreetMapProvider extends AbstractProvider<\n  RawResult[],\n  RawResult\n> {\n  searchUrl: string;\n  reverseUrl: string;\n\n  constructor(options: OpenStreetMapProviderOptions = {}) {\n    super(options);\n\n    const host = 'https://nominatim.openstreetmap.org';\n    this.searchUrl = options.searchUrl || `${host}/search`;\n    this.reverseUrl = options.reverseUrl || `${host}/reverse`;\n  }\n\n  endpoint({ query, type }: EndpointArgument): string {\n    const params = typeof query === 'string' ? { q: query } : query;\n    params.format = 'json';\n\n    switch (type) {\n      case RequestType.REVERSE:\n        return this.getUrl(this.reverseUrl, params);\n\n      default:\n        return this.getUrl(this.searchUrl, params);\n    }\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    const records = Array.isArray(response.data)\n      ? response.data\n      : [response.data];\n\n    return records.map((r) => ({\n      x: Number(r.lon),\n      y: Number(r.lat),\n      label: r.display_name,\n      bounds: [\n        [parseFloat(r.boundingbox[0]), parseFloat(r.boundingbox[2])], // s, w\n        [parseFloat(r.boundingbox[1]), parseFloat(r.boundingbox[3])], // n, e\n      ],\n      raw: r,\n    }));\n  }\n}\n","import OpenStreetMapProvider, {\n  OpenStreetMapProviderOptions,\n} from './openStreetMapProvider';\n\nexport default class LocationIQProvider extends OpenStreetMapProvider {\n  constructor(options: OpenStreetMapProviderOptions) {\n    super({\n      ...options,\n      searchUrl: `https://locationiq.org/v1/search.php`,\n      reverseUrl: `https://locationiq.org/v1/reverse.php`,\n    });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  LatLng,\n  ParseArgument,\n  SearchArgument,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  results: RawResult[];\n}\n\nexport interface RawResult {\n  annotations: {\n    DMS: { lat: string; lng: string };\n    MGRS: string;\n    Maidenhead: string;\n    Mercator: { x: number; y: number };\n    OSM: {\n      edit_url: string;\n      note_url: string;\n      url: string;\n    };\n    UN_M49: {\n      regions: { [key: string]: string };\n      statistical_groupings: string[];\n    };\n    callingcode: number;\n    currency: {\n      alternate_symbols: string[];\n      decimal_mark: string;\n      html_entity: string;\n      iso_code: string;\n      iso_numeric: string;\n      name: string;\n      smallest_denomination: number;\n      subunit: string;\n      subunit_to_unit: number;\n      symbol: string;\n      symbol_first: number;\n      thousands_separator: string;\n    };\n    flag: string;\n    geohash: string;\n    qibla: number;\n    roadinfo: {\n      drive_on: string;\n      road: string;\n      road_type: string;\n      speed_in: string;\n    };\n    sun: {\n      rise: {\n        apparent: number;\n        astronomical: number;\n        civil: number;\n        nautical: number;\n      };\n      set: {\n        apparent: number;\n        astronomical: number;\n        civil: number;\n        nautical: number;\n      };\n    };\n    timezone: {\n      name: string;\n      now_in_dst: number;\n      offset_sec: number;\n      offset_string: string;\n      short_name: string;\n    };\n    what3words: { words: string };\n  };\n  bounds: {\n    northeast: LatLng;\n    southwest: LatLng;\n  };\n  formatted: string;\n  geometry: LatLng;\n}\n\nexport default class OpenCageProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://api.opencagedata.com/geocode/v1/json';\n\n  endpoint({ query }: EndpointArgument) {\n    const params = typeof query === 'string' ? { q: query } : query;\n    params.format = 'json';\n\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.results.map((r) => ({\n      x: r.geometry.lng,\n      y: r.geometry.lat,\n      label: r.formatted,\n      bounds: [\n        [r.bounds.southwest.lat, r.bounds.southwest.lng], // s, w\n        [r.bounds.northeast.lat, r.bounds.northeast.lng], // n, e\n      ],\n      raw: r,\n    }));\n  }\n\n  async search(options: SearchArgument): Promise<SearchResult<RawResult>[]> {\n    // opencage returns a 400 error when query length < 2\n    if (options.query.length < 2) {\n      return [];\n    }\n\n    return super.search(options);\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  ProviderOptions,\n  SearchResult,\n  BoundsTuple,\n} from './provider';\n\nexport type RequestResult = {\n  features: RawResult[];\n};\nexport interface RawResult {\n  center: [string, string];\n  text: string;\n  place_name: string;\n  bbox: [string, string, string, string];\n}\n\nexport type MapBoxProviderOptions = {\n  searchUrl?: string;\n  reverseUrl?: string;\n} & ProviderOptions;\n\nexport default class MapBoxProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl: string;\n\n  constructor(options: MapBoxProviderOptions = {}) {\n    super(options);\n\n    const host = 'https://a.tiles.mapbox.com';\n    this.searchUrl = options.searchUrl || `${host}/v4/geocode/mapbox.places/`;\n  }\n\n  endpoint({ query }: EndpointArgument): string {\n    return this.getUrl(`${this.searchUrl}${query}.json`);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    const records = Array.isArray(response.data.features)\n      ? response.data.features\n      : [];\n\n    return records.map((r) => {\n      let bounds = null;\n      if (r.bbox) {\n        bounds = [\n          [parseFloat(r.bbox[1]), parseFloat(r.bbox[0])], // s, w\n          [parseFloat(r.bbox[3]), parseFloat(r.bbox[2])], // n, e\n        ] as BoundsTuple;\n      }\n\n      return {\n        x: Number(r.center[0]),\n        y: Number(r.center[1]),\n        label: r.place_name ? r.place_name : r.text,\n        bounds,\n        raw: r,\n      };\n    });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  ProviderOptions,\n  SearchResult,\n  RequestType,\n} from './provider';\n\nexport interface RequestResult {\n  features: RawResult[];\n  type: string;\n  version: string;\n  attribution: string;\n  licence: string;\n  query: string;\n  limit: string;\n}\n\nexport interface RawResult {\n  properties: {\n    label: string;\n    score: number;\n    importance: number;\n    x: number;\n    y: number;\n    housenumber: string;\n    id: string;\n    type: string;\n    name: string;\n    postcode: string;\n    citycode: string;\n    city: string;\n    context: string;\n    street: string;\n  };\n  type: string;\n  geometry: {\n    coordinates: number[];\n    type: string;\n  };\n}\n\nexport type GeoApiFrProviderOptions = {\n  searchUrl?: string;\n  reverseUrl?: string;\n} & ProviderOptions;\n\nexport default class GeoApiFrProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl: string;\n  reverseUrl: string;\n\n  constructor(options: GeoApiFrProviderOptions = {}) {\n    super(options);\n\n    const host = 'https://api-adresse.data.gouv.fr';\n    this.searchUrl = options.searchUrl || `${host}/search`;\n    this.reverseUrl = options.reverseUrl || `${host}/reverse`;\n  }\n\n  endpoint({ query, type }: EndpointArgument) {\n    const params = typeof query === 'string' ? { q: query } : query;\n\n    switch (type) {\n      case RequestType.REVERSE:\n        return this.getUrl(this.reverseUrl, params);\n\n      default:\n        return this.getUrl(this.searchUrl, params);\n    }\n  }\n\n  parse(result: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return result.data.features.map((r) => ({\n      x: r.geometry.coordinates[0],\n      y: r.geometry.coordinates[1],\n      label: r.properties.label,\n      bounds: null,\n      raw: r,\n    }));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}