{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { db } from '@/firebase';\nimport navbar from '@/components/Navbar.vue';\nexport default {\n  name: 'Cart',\n  components: {\n    navbar\n  },\n\n  data() {\n    return {\n      ticket: {\n        products: null,\n        total: 0\n      },\n      counter: 0,\n      cart: [],\n      fields: ['#', 'remove', 'image', 'name', 'quantity', 'price']\n    };\n  },\n\n  methods: {\n    clean() {\n      this.cart = [];\n\n      for (const key in this.cart) {\n        this.cart[key].cart = false;\n        this.cart[key].quantity = 1;\n      }\n\n      localStorage.setItem('products', JSON.stringify(this.cart));\n      this.$refs['modal-1'].hide();\n    },\n\n    remove(id) {\n      for (let index = 0; index < this.cart.length; index++) {\n        if (this.cart[index].id == id) {\n          this.cart.splice(index, 1);\n          localStorage.setItem('products', JSON.stringify(this.cart));\n        }\n      }\n    },\n\n    buy() {\n      this.ticket = {\n        products: this.cart,\n        total: this.total\n      };\n      db.collection('vue').add(this.ticket);\n      this.$refs['modal-1'].show();\n    },\n\n    increment(id) {\n      for (let index = 0; index < this.cart.length; index++) {\n        if (this.cart[index].id == id) {\n          this.cart[index].quantity++;\n          localStorage.setItem('products', JSON.stringify(this.cart));\n        }\n      }\n    },\n\n    decrement(id) {\n      for (let index = 0; index < this.cart.length; index++) {\n        if (this.cart[index].id == id) {\n          this.cart[index].quantity--;\n          localStorage.setItem('products', JSON.stringify(this.cart));\n        }\n      }\n    }\n\n  },\n  computed: {\n    total() {\n      let t = 0;\n\n      for (let index = 0; index < this.cart.length; index++) {\n        t += this.cart[index].price * this.cart[index].quantity;\n      }\n\n      return t;\n    }\n\n  },\n\n  created() {\n    if (JSON.parse(localStorage.getItem('products'))) {\n      this.cart = JSON.parse(localStorage.getItem('products'));\n    } else {\n      this.cart = [];\n    }\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;AACA;AACA;AACAA,cADA;AAEAC;AACAC;AADA,GAFA;;AAKAC;AACA;AACAC;AACAC,sBADA;AAEAC;AAFA,OADA;AAKAC,gBALA;AAMAC,cANA;AAOAC;AAPA;AASA,GAfA;;AAgBAC;AAEAC;AACA;;AAEA;AACA;AACA;AACA;;AACAC;AACA;AACA,KAXA;;AAYAC;AAEA;AACA;AACA;AACAD;AACA;AACA;AAEA,KArBA;;AAsBAE;AACA;AACAT,2BADA;AAEAC;AAFA;AAIAS;AACA;AAEA,KA9BA;;AA+BAC;AACA;AACA;AACA;AACAJ;AACA;AACA;AACA,KAtCA;;AAuCAK;AACA;AACA;AACA;AACAL;AACA;AACA;AACA;;AA9CA,GAhBA;AAgEAM;AACAZ;AACA;;AACA;AACAa;AAEA;;AACA;AACA;;AARA,GAhEA;;AA0EAC;AACA;AACA;AACA,KAFA,MAEA;AACA;AACA;AACA;;AAhFA","names":["name","components","navbar","data","ticket","products","total","counter","cart","fields","methods","clean","localStorage","remove","buy","db","increment","decrement","computed","t","created"],"sourceRoot":"src/views","sources":["Cart.vue"],"sourcesContent":[" <template>\r\n     <div >\r\n         <navbar />\r\n         <b-container fluid class=\"mt-4\">\r\n\r\n <b-row>\r\n     <b-col>\r\n        <h2> Shopping Cart </h2>\r\n     </b-col>\r\n </b-row>\r\n\r\n\r\n<b-row>\r\n<b-col sm=\"12\" class=\"text-center\">\r\n        <b-table fixed bordered hover :items=\"cart\" :fields=\"fields\">\r\n\r\n        <template v-slot:cell(#)=\"data\">\r\n        {{ data.index+1 }}\r\n        </template>\r\n        <template v-slot:cell(price)=\"data\">\r\n        {{ (data.item.price * data.item.quantity).toFixed(2) }} $\r\n        </template>\r\n        <template v-slot:cell(remove)=\"data\">\r\n        <b-button @click=\"remove(data.item.id)\" variant=\"danger\" class=\"mr-2\">\r\n        X\r\n        </b-button>\r\n        </template>\r\n        <template v-slot:cell(quantity)=\"data\">\r\n        <b-row>\r\n            <b-col md=\"3\" sm=\"12\" class=\"text-center\">\r\n            <b-button :disabled=\"data.item.quantity <=1\" variant=\"primary\" @click=\"decrement(data.item.id)\" class=\"mr-2\">\r\n        -\r\n            </b-button>\r\n        </b-col>\r\n        <b-col md=\"6\" sm=\"12\" class=\"text-center\">\r\n            <h4>{{data.item.quantity}}</h4>\r\n        </b-col>\r\n        <b-col md=\"3\" sm=\"12\" class=\"text-center\">\r\n            <b-button variant=\"primary\" @click=\"increment(data.item.id)\" class=\"mr-2\">\r\n        +\r\n            </b-button>\r\n        </b-col>\r\n        </b-row>\r\n    </template>\r\n\r\n     <template v-slot:cell(image)=\"data\">\r\n        <b-img style=\"max-width: 3rem;\" :src=\"require(`@/assets/img/books/book${data.item.id}.jpg`)\" fluid alt=\"Responsive image\"></b-img>\r\n    </template>\r\n\r\n</b-table>\r\n</b-col>\r\n\r\n</b-row>\r\n<b-row class=\"text-center\" v-if=\"cart.length > 0\">\r\n    <b-col></b-col>\r\n    <b-col></b-col>\r\n    <b-col></b-col>\r\n    <b-col></b-col>\r\n    <b-col><h3>Total</h3></b-col>\r\n    <b-col><h3>{{total.toFixed(2)}} $ </h3></b-col>\r\n</b-row>\r\n<b-row class=\"mt-4 text-center\" v-if=\"cart.length > 0\">\r\n    <b-col>\r\n        <b-button @click=\"clean\" variant=\"info\" block class=\"mr-2\">\r\n        Clean\r\n        </b-button>\r\n    </b-col>\r\n<b-col></b-col>\r\n<!-- <b-col cols=\"4\"> Aplikacja </b-col> -->\r\n\r\n<b-col>\r\n\r\n</b-col>\r\n<b-col>\r\n    <b-button   @click=\"buy\" variant=\"success\" block class=\"mr-2\">\r\n        Buy\r\n    </b-button>\r\n</b-col>\r\n</b-row>\r\n<b-modal hide-header-close no-close-on-esc no-close-on-backdrop ref=\"modal-1\" centered title=\"Purchase Completed \">\r\n<template slot=\"modal-footer\">\r\n<b-button class=\"mt-3\" variant=\"info\" block @click=\"clean\">Confirm</b-button>\r\n\r\n\r\n    </template>\r\n<p class=\"mb-4\">Products:</p>\r\n<ul v-for=\"productFinal in ticket.products\" :key=\"productFinal.id\">\r\n<li>\r\nProduct name: {{productFinal.name}}\r\n</li>\r\n<li>\r\nQuantity: {{productFinal.quantity}}\r\n</li>\r\n<li>\r\nPrice: {{productFinal.price.toFixed(2)}} $\r\n</li>\r\n<li>\r\nTotal: {{ (productFinal.price * productFinal.quantity).toFixed(2)}} $\r\n</li>\r\n<hr>\r\n</ul>\r\n<h2 class=\"my-4 text-center\">Total: {{ ticket.total.toFixed(2)}} $</h2>\r\n\r\n\r\n</b-modal>\r\n\r\n</b-container>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {db} from '@/firebase'\r\nimport navbar from '@/components/Navbar.vue'\r\nexport default {\r\n    name: 'Cart',\r\n    components: {\r\n        navbar\r\n    },\r\n    data(){\r\n        return {\r\n            ticket:{\r\n                products: null,\r\n                total:0\r\n            },\r\n            counter: 0,\r\n        cart:[],\r\n        fields: ['#','remove','image','name','quantity','price']\r\n        }\r\n    },\r\n    methods: {\r\n\r\n        clean(){\r\n            this.cart = [];\r\n\r\n            for (const key in this.cart){\r\n                this.cart[key].cart = false\r\n                this.cart[key].quantity=1\r\n            }\r\n            localStorage.setItem('products',JSON.stringify(this.cart))\r\n            this.$refs['modal-1'].hide()\r\n        },\r\n        remove(id){\r\n\r\n            for(let index = 0;index <this.cart.length;index++){\r\n            if(this.cart[index].id == id){\r\n                this.cart.splice(index,1);\r\n                localStorage.setItem('products',JSON.stringify(this.cart))\r\n            }\r\n        }\r\n\r\n        },\r\n        buy(){\r\n            this.ticket={\r\n                products: this.cart,\r\n                total: this.total\r\n            }\r\n            db.collection('vue').add(this.ticket);\r\n            this.$refs['modal-1'].show()\r\n\r\n        },\r\n        increment(id){\r\n            for(let index=0; index <this.cart.length; index++){\r\n                if(this.cart[index].id == id){\r\n                    this.cart[index].quantity++\r\n                    localStorage.setItem('products',JSON.stringify(this.cart))\r\n                }\r\n            }\r\n        },\r\n        decrement(id){\r\n            for(let index=0; index <this.cart.length; index++){\r\n                if(this.cart[index].id == id){\r\n                    this.cart[index].quantity--\r\n                    localStorage.setItem('products',JSON.stringify(this.cart))\r\n                }\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        total(){\r\n            let t=0;\r\n            for(let index= 0;index <this.cart.length; index++){\r\n                t+= this.cart[index].price*this.cart[index].quantity\r\n\r\n            }\r\n            return t\r\n        }\r\n    },\r\n    created(){\r\n        if(JSON.parse(localStorage.getItem('products'))){\r\n            this.cart = JSON.parse(localStorage.getItem('products'))\r\n        }else{\r\n            this.cart = []\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}